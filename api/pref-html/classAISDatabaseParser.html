<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>libdap++: AISDatabaseParser class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>AISDatabaseParser Class Reference</h1><code>#include &lt;<a class="el" href="AISDatabaseParser_8h-source.html">AISDatabaseParser.h</a>&gt;</code>
<p>
<a href="classAISDatabaseParser-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAISDatabaseParser.html#AISDatabaseParsera0">intern</a> (const  string &amp;database, <a class="el" href="classAISResources.html">AISResources</a> *ais)  throw (AISDatabaseReadFailed)</td></tr>

<tr><td colspan=2><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">SAX Parser Callbacks</div></td></tr>
<tr><td colspan="2"><div class="groupText">These methods are declared static in the class header. This gives them C linkage which allows them to be used as callbacks by the SAX parser engine. <br><br></div></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAISDatabaseParser.html#AISDatabaseParserz1_0">aisStartDocument</a> (AISParserState *state)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAISDatabaseParser.html#AISDatabaseParserz1_1">aisEndDocument</a> (AISParserState *state)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAISDatabaseParser.html#AISDatabaseParserz1_2">aisStartElement</a> (AISParserState *state, const  char *name, const  char **attrs)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAISDatabaseParser.html#AISDatabaseParserz1_3">aisEndElement</a> (AISParserState *state, const  char *name)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>xmlEntityPtr&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAISDatabaseParser.html#AISDatabaseParserz1_4">aisGetEntity</a> (AISParserState *state, const  xmlChar *name)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAISDatabaseParser.html#AISDatabaseParserz1_5">aisWarning</a> (AISParserState *state, const  char *msg,...)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAISDatabaseParser.html#AISDatabaseParserz1_6">aisError</a> (AISParserState *state, const  char *msg,...)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAISDatabaseParser.html#AISDatabaseParserz1_7">aisFatalError</a> (AISParserState *state, const  char *msg,...)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Parse the XML database/configuration file which lists a collection of AIS resources.<p>
Static methods are used as callbacks for the SAX parser. They do not throw exceptions because exceptions from within callbacks are not reliable or portable (although exceptions themselves are not 100% portable...). To signal errors, the methods record information in the AISParserState object. Once any of the error handlers (aisWarning, aisError or aisFatalError) is called, construction of an <a class="el" href="classAISResources.html">AISResources</a> object ends even though the SAX parser still calls the various callback functions. The parse method throws an <a class="el" href="classAISDatabaseReadFailed.html">AISDatabaseReadFailed</a> exception if an error was found.<p>
Note that this class uses the C++-supplied default definitions for the default and copy constructors as well as the destructor and assignment operator.<p>
This class should be extended so that the line number is added to error messages.<p>
<dl compact><dt><b>See also:</b></dt><dd>AISResource </dd></dl>

<p>

<p>
Definition at line <a class="el" href="AISDatabaseParser_8h-source.html#l00066">66</a> of file <a class="el" href="AISDatabaseParser_8h-source.html">AISDatabaseParser.h</a>.<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="AISDatabaseParserz1_1" doxytag="AISDatabaseParser::aisEndDocument" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AISDatabaseParser::aisEndDocument </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">AISParserState *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>state</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Clean up after finishing a parse. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>state</em>&nbsp;</td><td>The SAX parser state. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="AISDatabaseParser_8cc-source.html#l00077">77</a> of file <a class="el" href="AISDatabaseParser_8cc-source.html">AISDatabaseParser.cc</a>.
<p>
References <a class="el" href="AISDatabaseParser_8cc-source.html#l00315">aisFatalError()</a>, <a class="el" href="debug_8h-source.html#l00057">DBG</a>, and <a class="el" href="debug_8h-source.html#l00064">DBG2</a>.    </td>
  </tr>
</table>
<a class="anchor" name="AISDatabaseParserz1_3" doxytag="AISDatabaseParser::aisEndElement" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AISDatabaseParser::aisEndElement </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">AISParserState *&nbsp;</td>
          <td class="mdname" nowrap> <em>state</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Process an end element tag. This is where values are added to the <a class="el" href="classAISResources.html">AISResources</a> object that's held by <code>state</code>. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>state</em>&nbsp;</td><td>The SAX parser state. </td></tr>
    <tr><td valign=top><em>name</em>&nbsp;</td><td>The name of the element; used only for code instrumentation. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="AISDatabaseParser_8cc-source.html#l00212">212</a> of file <a class="el" href="AISDatabaseParser_8cc-source.html">AISDatabaseParser.cc</a>.
<p>
References <a class="el" href="debug_8h-source.html#l00064">DBG2</a>.    </td>
  </tr>
</table>
<a class="anchor" name="AISDatabaseParserz1_6" doxytag="AISDatabaseParser::aisError" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AISDatabaseParser::aisError </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">AISParserState *&nbsp;</td>
          <td class="mdname" nowrap> <em>state</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>...&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Process an XML error. This is treated as a fatal error since there's no easy way for libdap++ to signal warning to users. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>state</em>&nbsp;</td><td>The SAX parser state. </td></tr>
    <tr><td valign=top><em>msg</em>&nbsp;</td><td>A printf-style format string. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="AISDatabaseParser_8cc-source.html#l00295">295</a> of file <a class="el" href="AISDatabaseParser_8cc-source.html">AISDatabaseParser.cc</a>.
<p>
References <a class="el" href="util_8cc-source.html#l00488">long_to_string()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="AISDatabaseParserz1_7" doxytag="AISDatabaseParser::aisFatalError" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AISDatabaseParser::aisFatalError </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">AISParserState *&nbsp;</td>
          <td class="mdname" nowrap> <em>state</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>...&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Process an XML fatal error. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>state</em>&nbsp;</td><td>The SAX parser state. </td></tr>
    <tr><td valign=top><em>msg</em>&nbsp;</td><td>A printf-style format string. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="AISDatabaseParser_8cc-source.html#l00315">315</a> of file <a class="el" href="AISDatabaseParser_8cc-source.html">AISDatabaseParser.cc</a>.
<p>
References <a class="el" href="util_8cc-source.html#l00488">long_to_string()</a>.
<p>
Referenced by <a class="el" href="AISDatabaseParser_8cc-source.html#l00077">aisEndDocument()</a>, and <a class="el" href="AISDatabaseParser_8cc-source.html#l00098">aisStartElement()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="AISDatabaseParserz1_4" doxytag="AISDatabaseParser::aisGetEntity" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> xmlEntityPtr AISDatabaseParser::aisGetEntity </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">AISParserState *&nbsp;</td>
          <td class="mdname" nowrap> <em>state</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const xmlChar *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handle the standard XML entities. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>state</em>&nbsp;</td><td>The SAX parser state. </td></tr>
    <tr><td valign=top><em>name</em>&nbsp;</td><td>The XML entity. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="AISDatabaseParser_8cc-source.html#l00264">264</a> of file <a class="el" href="AISDatabaseParser_8cc-source.html">AISDatabaseParser.cc</a>.    </td>
  </tr>
</table>
<a class="anchor" name="AISDatabaseParserz1_0" doxytag="AISDatabaseParser::aisStartDocument" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AISDatabaseParser::aisStartDocument </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">AISParserState *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>state</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize the SAX parser state object. This object is passed to each callback as a void pointer. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>state</em>&nbsp;</td><td>The SAX parser state. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="AISDatabaseParser_8cc-source.html#l00064">64</a> of file <a class="el" href="AISDatabaseParser_8cc-source.html">AISDatabaseParser.cc</a>.
<p>
References <a class="el" href="debug_8h-source.html#l00064">DBG2</a>.    </td>
  </tr>
</table>
<a class="anchor" name="AISDatabaseParserz1_2" doxytag="AISDatabaseParser::aisStartElement" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AISDatabaseParser::aisStartElement </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">AISParserState *&nbsp;</td>
          <td class="mdname" nowrap> <em>state</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const char **&nbsp;</td>
          <td class="mdname" nowrap> <em>attrs</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Process a start element tag. Because the AIS DTD uses attributes and because libxml2 does not validate those, we do attribute validation here. Values pulled from the attributes are recorded in <code>state</code> for later use in aisEndElement. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>state</em>&nbsp;</td><td>The SAX parser state. </td></tr>
    <tr><td valign=top><em>name</em>&nbsp;</td><td>The name of the element. </td></tr>
    <tr><td valign=top><em>attrs</em>&nbsp;</td><td>The element's attributes; 0, 2, 4, ... are the attribute names, 1, 3, 5, ... are the values. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="AISDatabaseParser_8cc-source.html#l00098">98</a> of file <a class="el" href="AISDatabaseParser_8cc-source.html">AISDatabaseParser.cc</a>.
<p>
References <a class="el" href="AISDatabaseParser_8cc-source.html#l00315">aisFatalError()</a>, <a class="el" href="debug_8h-source.html#l00057">DBG</a>, and <a class="el" href="debug_8h-source.html#l00064">DBG2</a>.    </td>
  </tr>
</table>
<a class="anchor" name="AISDatabaseParserz1_5" doxytag="AISDatabaseParser::aisWarning" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AISDatabaseParser::aisWarning </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">AISParserState *&nbsp;</td>
          <td class="mdname" nowrap> <em>state</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>...&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Process an XML warning. This is treated as a fatal error since there's no easy way for libdap++ to signal warning to users. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>state</em>&nbsp;</td><td>The SAX parser state. </td></tr>
    <tr><td valign=top><em>msg</em>&nbsp;</td><td>A printf-style format string. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="AISDatabaseParser_8cc-source.html#l00274">274</a> of file <a class="el" href="AISDatabaseParser_8cc-source.html">AISDatabaseParser.cc</a>.
<p>
References <a class="el" href="util_8cc-source.html#l00488">long_to_string()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="AISDatabaseParsera0" doxytag="AISDatabaseParser::intern" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AISDatabaseParser::intern </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const string &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>database</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classAISResources.html">AISResources</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ais</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throw (<a class="el" href="classAISDatabaseReadFailed.html">AISDatabaseReadFailed</a>)</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Parse an AIS database encoded in XML. The information in the XML document is loaded into an instance of <a class="el" href="classAISResources.html">AISResources</a>. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>database</em>&nbsp;</td><td>Read from this XML file. </td></tr>
    <tr><td valign=top><em>ais</em>&nbsp;</td><td>Load information into this instance of <a class="el" href="classAISResources.html">AISResources</a>. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>AISDatabaseReadFailed</em>&nbsp;</td><td>Thrown if the XML document could not be read or parsed. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="AISDatabaseParser_8cc-source.html#l00369">369</a> of file <a class="el" href="AISDatabaseParser_8cc-source.html">AISDatabaseParser.cc</a>.
<p>
Referenced by <a class="el" href="AISResources_8cc-source.html#l00241">AISResources::read_database()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="AISDatabaseParser_8h-source.html">AISDatabaseParser.h</a><li><a class="el" href="AISDatabaseParser_8cc-source.html">AISDatabaseParser.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Feb 4 23:44:51 2004 for libdap++ by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>

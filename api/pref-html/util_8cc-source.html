<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>libdap++: util.cc Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>util.cc</h1><a href="util_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 <span class="comment">// -*- mode: c++; c-basic-offset:4 -*-</span>
00003 
00004 <span class="comment">// This file is part of libdap, A C++ implementation of the OPeNDAP Data</span>
00005 <span class="comment">// Access Protocol.</span>
00006 
00007 <span class="comment">// Copyright (c) 2002,2003 OPeNDAP, Inc.</span>
00008 <span class="comment">// Author: James Gallagher &lt;jgallagher@opendap.org&gt;</span>
00009 <span class="comment">//</span>
00010 <span class="comment">// This library is free software; you can redistribute it and/or</span>
00011 <span class="comment">// modify it under the terms of the GNU Lesser General Public</span>
00012 <span class="comment">// License as published by the Free Software Foundation; either</span>
00013 <span class="comment">// version 2.1 of the License, or (at your option) any later version.</span>
00014 <span class="comment">// </span>
00015 <span class="comment">// This library is distributed in the hope that it will be useful,</span>
00016 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00017 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
00018 <span class="comment">// Lesser General Public License for more details.</span>
00019 <span class="comment">// </span>
00020 <span class="comment">// You should have received a copy of the GNU Lesser General Public</span>
00021 <span class="comment">// License along with this library; if not, write to the Free Software</span>
00022 <span class="comment">// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00023 <span class="comment">//</span>
00024 <span class="comment">// You can contact OPeNDAP, Inc. at PO Box 112, Saunderstown, RI. 02874-0112.</span>
00025  
00026 <span class="comment">// (c) COPYRIGHT URI/MIT 1994-1999</span>
00027 <span class="comment">// Please read the full copyright statement in the file COPYRIGHT_URI.</span>
00028 <span class="comment">//</span>
00029 <span class="comment">// Authors:</span>
00030 <span class="comment">//      jhrg,jimg       James Gallagher &lt;jgallagher@gso.uri.edu&gt;</span>
00031 
00032 <span class="comment">// Utility functions used by the api.</span>
00033 <span class="comment">//</span>
00034 <span class="comment">// jhrg 9/21/94</span>
00035 
00036 <span class="preprocessor">#include "<a class="code" href="config__dap_8h.html">config_dap.h</a>"</span>
00037 
00038 <span class="keyword">static</span> <span class="keywordtype">char</span> rcsid[] <a class="code" href="config__dap_8h.html#a49">not_used</a> = {<span class="stringliteral">"$Id$"</span>};
00039 
00040 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00041 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00042 <span class="preprocessor">#include &lt;assert.h&gt;</span>
00043 <span class="preprocessor">#include &lt;ctype.h&gt;</span>
00044 <span class="preprocessor">#ifndef TM_IN_SYS_TIME</span>
00045 <span class="preprocessor"></span><span class="preprocessor">#include &lt;time.h&gt;</span>
00046 <span class="preprocessor">#else</span>
00047 <span class="preprocessor"></span><span class="preprocessor">#include &lt;sys/time.h&gt;</span>
00048 <span class="preprocessor">#endif</span>
00049 <span class="preprocessor"></span>
00050 <span class="preprocessor">#ifndef WIN32</span>
00051 <span class="preprocessor"></span><span class="preprocessor">#include &lt;unistd.h&gt;</span>
00052 <span class="preprocessor">#else</span>
00053 <span class="preprocessor"></span><span class="preprocessor">#include &lt;io.h&gt;</span>
00054 <span class="preprocessor">#include &lt;fcntl.h&gt;</span>
00055 <span class="preprocessor">#include &lt;process.h&gt;</span>
00056 <span class="preprocessor">#endif</span>
00057 <span class="preprocessor"></span>
00058 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
00059 <span class="preprocessor">#include &lt;sys/stat.h&gt;</span>
00060 
00061 <span class="preprocessor">#include &lt;string&gt;</span>
00062 <span class="preprocessor">#include &lt;sstream&gt;</span>
00063 <span class="preprocessor">#include &lt;vector&gt;</span>
00064 <span class="preprocessor">#include &lt;algorithm&gt;</span>
00065 <span class="preprocessor">#include &lt;stdexcept&gt;</span>
00066 
00067 <span class="preprocessor">#include "Regex.h"</span>
00068 
00069 <span class="preprocessor">#include "<a class="code" href="BaseType_8h.html">BaseType.h</a>"</span>
00070 <span class="preprocessor">#include "<a class="code" href="Str_8h.html">Str.h</a>"</span>
00071 <span class="preprocessor">#include "<a class="code" href="Url_8h.html">Url.h</a>"</span>
00072 <span class="preprocessor">#include "<a class="code" href="List_8h.html">List.h</a>"</span>
00073 <span class="preprocessor">#include "<a class="code" href="Sequence_8h.html">Sequence.h</a>"</span>
00074 <span class="preprocessor">#include "<a class="code" href="Error_8h.html">Error.h</a>"</span>
00075 <span class="preprocessor">#include "<a class="code" href="parser_8h.html">parser.h</a>"</span>
00076 <span class="preprocessor">#include "expr.tab.h"</span>
00077 <span class="preprocessor">#include "<a class="code" href="util_8h.html">util.h</a>"</span>
00078 <span class="preprocessor">#include "<a class="code" href="debug_8h.html">debug.h</a>"</span>
00079 
00080 <span class="preprocessor">#ifdef TRACE_NEW</span>
00081 <span class="preprocessor"></span><span class="preprocessor">#include "<a class="code" href="trace__new_8h.html">trace_new.h</a>"</span>
00082 <span class="preprocessor">#endif</span>
00083 <span class="preprocessor"></span>
00084 <span class="keyword">using</span> std::cerr;
00085 <span class="keyword">using</span> std::endl;
00086 <span class="keyword">using</span> std::sort;
00087 <span class="keyword">using</span> std::ostringstream;
00088 
00089 <span class="comment">// Remove spaces from the start of a URL and from the start of any constraint</span>
00090 <span class="comment">// expression it contains. 4/7/98 jhrg</span>
00091 
00092 string 
<a name="l00093"></a><a class="code" href="util_8cc.html#a2">00093</a> <a class="code" href="util_8cc.html#a2">prune_spaces</a>(<span class="keyword">const</span> string &amp;name)
00094 {
00095     <span class="comment">// If the URL does not even have white space return.</span>
00096     <span class="keywordflow">if</span> (name.find_first_of(<span class="charliteral">' '</span>) == name.npos)
00097     <span class="keywordflow">return</span> name;
00098     <span class="keywordflow">else</span> {
00099     <span class="comment">// Strip leading spaces from http://...</span>
00100     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = name.find_first_not_of(<span class="charliteral">' '</span>);
00101     string tmp_name = name.substr(i);
00102     
00103     <span class="comment">// Strip leading spaces from constraint part (following `?').</span>
00104     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = tmp_name.find(<span class="charliteral">'?'</span>) + 1;
00105     i = tmp_name.find_first_not_of(<span class="charliteral">' '</span>, j);
00106     tmp_name.erase(j, i-j);
00107 
00108     <span class="keywordflow">return</span> tmp_name;
00109     }
00110 }
00111 
00112 <span class="comment">// Compare elements in a list of (BaseType *)s and return true if there are</span>
00113 <span class="comment">// no duplicate elements, otherwise return false.</span>
00114 
00115 <span class="keywordtype">bool</span>
<a name="l00116"></a><a class="code" href="util_8cc.html#a3">00116</a> <a class="code" href="util_8cc.html#a3">unique_names</a>(vector&lt;BaseType *&gt; l, <span class="keyword">const</span> string &amp;var_name, 
00117          <span class="keyword">const</span> string &amp;type_name, string &amp;msg)
00118 {
00119     <span class="comment">// copy the identifier names to a vector</span>
00120     vector&lt;string&gt; names(l.size());
00121 
00122     <span class="keywordtype">int</span> nelem = 0;
00123     <span class="keyword">typedef</span> std::vector&lt;BaseType *&gt;::const_iterator citer ;
00124     <span class="keywordflow">for</span> (citer i = l.begin(); i != l.end(); i++)
00125     {
00126     assert(*i);
00127     names[nelem++] = (*i)-&gt;name();
00128     <a class="code" href="debug_8h.html#a1">DBG</a>(cerr &lt;&lt; <span class="stringliteral">"NAMES["</span> &lt;&lt; nelem-1 &lt;&lt; <span class="stringliteral">"]="</span> &lt;&lt; names[nelem-1] &lt;&lt; endl);
00129     }
00130     
00131     <span class="comment">// sort the array of names</span>
00132     sort(names.begin(), names.end());
00133     
00134 <span class="preprocessor">#ifdef DODS_DEBUG2</span>
00135 <span class="preprocessor"></span>    cout &lt;&lt; <span class="stringliteral">"unique:"</span> &lt;&lt; endl;
00136     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii = 0; ii &lt; nelem; ++ii)
00137     cout &lt;&lt; <span class="stringliteral">"NAMES["</span> &lt;&lt; ii &lt;&lt; <span class="stringliteral">"]="</span> &lt;&lt; names[ii] &lt;&lt; endl;
00138 <span class="preprocessor">#endif</span>
00139 <span class="preprocessor"></span>    
00140     <span class="comment">// sort the array of names</span>
00141     sort(names.begin(), names.end());
00142     
00143 <span class="preprocessor">#ifdef DODS_DEBUG2</span>
00144 <span class="preprocessor"></span>    cout &lt;&lt; <span class="stringliteral">"unique:"</span> &lt;&lt; endl;
00145     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii = 0; ii &lt; nelem; ++ii)
00146     cout &lt;&lt; <span class="stringliteral">"NAMES["</span> &lt;&lt; ii &lt;&lt; <span class="stringliteral">"]="</span> &lt;&lt; names[ii] &lt;&lt; endl;
00147 <span class="preprocessor">#endif</span>
00148 <span class="preprocessor"></span>    
00149     <span class="comment">// look for any instance of consecutive names that are ==</span>
00150     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 1; j &lt; nelem; ++j)
00151     {
00152     <span class="keywordflow">if</span> (names[j-1] == names[j]) {
00153         ostringstream oss;
00154         oss &lt;&lt; <span class="stringliteral">"The variable `"</span> &lt;&lt; names[j] 
00155          &lt;&lt; <span class="stringliteral">"' is used more than once in "</span> &lt;&lt; type_name &lt;&lt; <span class="stringliteral">" `"</span>
00156          &lt;&lt; var_name &lt;&lt; <span class="stringliteral">"'"</span>;
00157         msg = oss.str();
00158 
00159         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00160     }
00161     }
00162 
00163     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00164 }
00165 
00166 <span class="comment">// This function is used to allocate memory for, and initialize, a new XDR</span>
00167 <span class="comment">// pointer. It sets the stream associated with the (XDR *) to STREAM.</span>
00168 <span class="comment">//</span>
00169 <span class="comment">// NB: STREAM is not one of the C++/libg++ iostream classes; it is a (FILE</span>
00170 <span class="comment">// *).</span>
00171 
00172 <span class="comment">//  These func's moved to xdrutil_ppc.* under the PPC as explained there</span>
00173 <span class="preprocessor">#ifndef __POWERPC__</span>
00174 <span class="preprocessor"></span>XDR *               
<a name="l00175"></a><a class="code" href="util_8cc.html#a4">00175</a> <a class="code" href="util_8cc.html#a4">new_xdrstdio</a>(FILE *stream, <span class="keyword">enum</span> xdr_op xop)
00176 {
00177     XDR *xdr = <span class="keyword">new</span> XDR;
00178     
00179     xdrstdio_create(xdr, stream, xop);
00180     
00181     <span class="keywordflow">return</span> xdr;
00182 }
00183 
00184 XDR *
<a name="l00185"></a><a class="code" href="util_8cc.html#a5">00185</a> <a class="code" href="util_8cc.html#a5">set_xdrstdio</a>(XDR *xdr, FILE *stream, <span class="keyword">enum</span> xdr_op xop)
00186 {
00187     xdrstdio_create(xdr, stream, xop);
00188     
00189     <span class="keywordflow">return</span> xdr;
00190 }
00191 
00192 <span class="comment">// Delete an XDR pointer allocated using the above function. Do not close the</span>
00193 <span class="comment">// associated FILE pointer.</span>
00194 
00195 <span class="keywordtype">void</span>
<a name="l00196"></a><a class="code" href="util_8cc.html#a6">00196</a> <a class="code" href="util_8cc.html#a6">delete_xdrstdio</a>(XDR *xdr)
00197 {
00198     xdr_destroy(xdr);
00199 
00200     <span class="keyword">delete</span> xdr; xdr = 0;
00201 }
00202 <span class="preprocessor">#endif</span>
00203 <span class="preprocessor"></span>
00204 <span class="comment">// This function is used to en/decode Str and Url type variables. It is</span>
00205 <span class="comment">// defined as extern C since it is passed via function pointers to routines</span>
00206 <span class="comment">// in the xdr library where it is executed. This function is defined so</span>
00207 <span class="comment">// that Str and Url have an en/decoder which takes exactly two argumnets: an</span>
00208 <span class="comment">// XDR * and a string reference.</span>
00209 <span class="comment">//</span>
00210 <span class="comment">// NB: this function is *not* used for arrays (i.e., it is not the function</span>
00211 <span class="comment">// referenced by BaseType's _xdr_coder field when the object is a Str or Url.</span>
00212 <span class="comment">// Also note that \e max_str_len is an obese number but that really does not</span>
00213 <span class="comment">// matter; xdr_string() would never actually allocate that much memory unless</span>
00214 <span class="comment">// a string that size was sent from the server.</span>
00215 <span class="comment">//</span>
00216 <span class="comment">// Returns: XDR's bool_t; TRUE if no errors are detected, FALSE</span>
00217 <span class="comment">// otherwise. The formal parameter BUF is modified as a side effect.</span>
00218 
00219 <span class="keyword">extern</span> <span class="stringliteral">"C"</span> bool_t
<a name="l00220"></a><a class="code" href="util_8cc.html#a7">00220</a> <a class="code" href="util_8cc.html#a7">xdr_str</a>(XDR *xdrs, string &amp;buf)
00221 {
00222     <a class="code" href="debug_8h.html#a1">DBG</a>(cerr &lt;&lt; <span class="stringliteral">"In xdr_str, xdrs: "</span> &lt;&lt; xdrs &lt;&lt; endl);
00223 
00224     <span class="keywordflow">switch</span> (xdrs-&gt;x_op) {
00225       <span class="keywordflow">case</span> XDR_ENCODE: {    <span class="comment">// BUF is a pointer to a (string *)</span>
00226     <span class="keyword">const</span> <span class="keywordtype">char</span> *out_tmp = buf.c_str();
00227 
00228     <span class="keywordflow">return</span> xdr_string(xdrs, (<span class="keywordtype">char</span> **)&amp;out_tmp, <a class="code" href="Str_8h.html#a1">max_str_len</a>);
00229       }
00230 
00231       <span class="keywordflow">case</span> XDR_DECODE: {
00232     <span class="keywordtype">char</span> *in_tmp = NULL;
00233 
00234     bool_t stat = xdr_string(xdrs, &amp;in_tmp, <a class="code" href="Str_8h.html#a1">max_str_len</a>);
00235     <span class="keywordflow">if</span> (!stat)
00236         <span class="keywordflow">return</span> stat;
00237 
00238     buf = in_tmp;
00239 
00240     free(in_tmp);
00241     
00242     <span class="keywordflow">return</span> stat;
00243       }
00244     
00245       <span class="keywordflow">default</span>:
00246     assert(<span class="keyword">false</span>);
00247     <span class="keywordflow">return</span> 0;
00248     }
00249 }
00250 
00251 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00252"></a><a class="code" href="util_8cc.html#a8">00252</a> <a class="code" href="util_8cc.html#a8">dods_root</a>()
00253 {
00254     <span class="keywordtype">char</span> *<a class="code" href="util_8cc.html#a8">dods_root</a> = 0;
00255     <span class="keywordflow">return</span> ((<a class="code" href="util_8cc.html#a8">dods_root</a> = getenv(<span class="stringliteral">"DODS_ROOT"</span>)) ? <a class="code" href="util_8cc.html#a8">dods_root</a> : <a class="code" href="config__dap_8h.html#a8">DODS_ROOT</a>);
00256 }
00257 
00258 <span class="comment">// Return true if the program deflate exists and is executable by user, group</span>
00259 <span class="comment">// and world. If this returns false the caller should assume that server</span>
00260 <span class="comment">// filter programs won't be able to find the deflate program and thus won't</span>
00261 <span class="comment">// be able to compress the return document. </span>
00262 <span class="comment">// NB: this works because this function uses the same rules as compressor()</span>
00263 <span class="comment">// (which follows) to look for deflate. 2/11/98 jhrg</span>
00264 
00265 <span class="keywordtype">bool</span>
<a name="l00266"></a><a class="code" href="util_8cc.html#a9">00266</a> <a class="code" href="util_8cc.html#a9">deflate_exists</a>()
00267 {
00268     <a class="code" href="debug_8h.html#a1">DBG</a>(cerr &lt;&lt; <span class="stringliteral">"Entering deflate_exists..."</span>);
00269 
00270     <span class="keywordtype">int</span> status = <span class="keyword">false</span>;
00271     <span class="keyword">struct </span>stat buf;
00272 
00273 <span class="preprocessor">#ifdef WIN32</span>
00274 <span class="preprocessor"></span>    string <a class="code" href="EncodingType_8h.html#a3a1">deflate</a> = (string)<a class="code" href="util_8cc.html#a8">dods_root</a>() + <span class="stringliteral">"\\bin\\deflate"</span>;
00275 <span class="preprocessor">#else</span>
00276 <span class="preprocessor"></span>    string <a class="code" href="EncodingType_8h.html#a3a1">deflate</a> = (string)<a class="code" href="util_8cc.html#a8">dods_root</a>() + <span class="stringliteral">"/etc/deflate"</span>;
00277 <span class="preprocessor">#endif</span>
00278 <span class="preprocessor"></span>
00279     <span class="comment">// Check that the file exists...</span>
00280     <span class="comment">// First look for deflate using DODS_ROOT (compile-time constant subsumed</span>
00281     <span class="comment">// by an environment variable) and if that fails in the CWD which finds</span>
00282     <span class="comment">// the program when it is in the same directory as the dispatch script</span>
00283     <span class="comment">// and other server components. 2/11/98 jhrg</span>
00284     status = (stat(<a class="code" href="EncodingType_8h.html#a3a1">deflate</a>.c_str(), &amp;buf) == 0)
00285 <span class="preprocessor">#ifdef WIN32</span>
00286 <span class="preprocessor"></span>    || (stat(<span class="stringliteral">".\\deflate"</span>, &amp;buf) == 0);
00287 <span class="preprocessor">#else</span>
00288 <span class="preprocessor"></span>    || (stat(<span class="stringliteral">"./deflate"</span>, &amp;buf) == 0);
00289 <span class="preprocessor">#endif</span>
00290 <span class="preprocessor"></span>
00291     <span class="comment">// and that it can be executed.</span>
00292 <span class="preprocessor">#ifdef WIN32</span>
00293 <span class="preprocessor"></span>    status &amp;= (buf.st_mode &amp; _S_IEXEC);
00294 <span class="preprocessor">#else</span>
00295 <span class="preprocessor"></span>    status &amp;= buf.st_mode &amp; (S_IXUSR | S_IXGRP | S_IXOTH);
00296 <span class="preprocessor">#endif</span>
00297 <span class="preprocessor"></span>    <a class="code" href="debug_8h.html#a1">DBG</a>(cerr &lt;&lt; <span class="stringliteral">" returning "</span> &lt;&lt; (status ? <span class="stringliteral">"true."</span> : <span class="stringliteral">"false."</span>) &lt;&lt; endl);
00298     <span class="keywordflow">return</span> (status != 0);
00299 }
00300 
00301 FILE *
<a name="l00302"></a><a class="code" href="util_8cc.html#a10">00302</a> <a class="code" href="util_8cc.html#a10">compressor</a>(FILE *output, <span class="keywordtype">int</span> &amp;childpid)
00303 {
00304 <span class="preprocessor">#ifdef WIN32</span>
00305 <span class="preprocessor"></span>    <span class="comment">//  There is no such thing as a "fork" under win32. This makes it so that</span>
00306     <span class="comment">//  we have to juggle handles more aggressively. This code hasn't been</span>
00307     <span class="comment">//  tested and shown to work as of 07/2000.</span>
00308     <span class="keywordtype">int</span> pid, data[2];
00309     <span class="keywordtype">int</span> hStdIn,hStdOut;
00310 
00311     <span class="keywordflow">if</span>(_pipe(data, 512, O_BINARY | O_NOINHERIT) &lt; 0) {
00312     cerr &lt;&lt; <span class="stringliteral">"Could not create IPC channel for compressor process"</span> 
00313          &lt;&lt; endl;
00314     <span class="keywordflow">return</span> NULL;
00315     }
00316 
00317 
00318     <span class="comment">// This sets up for the child process, but it has to be reversed for the</span>
00319     <span class="comment">// parent after the spawn takes place.</span>
00320 
00321     <span class="comment">// Store stdin, stdout so we have something to restore to</span>
00322     hStdIn  = _dup(_fileno(stdin));  
00323     hStdOut = _dup(_fileno(stdout));
00324 
00325     <span class="comment">// Child is to read from read end of pipe</span>
00326     <span class="keywordflow">if</span>(_dup2(data[0], _fileno(stdin)) != 0) {
00327     cerr &lt;&lt; <span class="stringliteral">"dup of child stdin failed"</span> &lt;&lt; endl;
00328     <span class="keywordflow">return</span> NULL;
00329     }
00330     <span class="comment">// Child is to write its's stdout to file</span>
00331     <span class="keywordflow">if</span>(_dup2(_fileno(output), _fileno(stdout)) != 0) {
00332     cerr &lt;&lt; <span class="stringliteral">"dup of child stdout failed"</span> &lt;&lt; endl;
00333     <span class="keywordflow">return</span> NULL;
00334     }
00335     
00336     <span class="comment">// Spawn child process</span>
00337     string <a class="code" href="EncodingType_8h.html#a3a1">deflate</a> = <span class="stringliteral">"deflate.exe"</span>;
00338     <span class="keywordflow">if</span>((pid = _spawnlp(_P_NOWAIT, <a class="code" href="EncodingType_8h.html#a3a1">deflate</a>.c_str(), <a class="code" href="EncodingType_8h.html#a3a1">deflate</a>.c_str(), 
00339                <span class="stringliteral">"-c"</span>, <span class="stringliteral">"5"</span>, <span class="stringliteral">"-s"</span>, NULL)) &lt; 0) {
00340     cerr &lt;&lt; <span class="stringliteral">"Could not spawn to create compressor process"</span> &lt;&lt; endl;
00341     <span class="keywordflow">return</span> NULL;
00342     }
00343 
00344     <span class="comment">// Restore stdin, stdout for parent and close duplicate copies</span>
00345     <span class="keywordflow">if</span>(_dup2(hStdIn, _fileno(stdin)) != 0) {
00346     cerr &lt;&lt; <span class="stringliteral">"dup of stdin failed"</span> &lt;&lt; endl;
00347     <span class="keywordflow">return</span> NULL;
00348     }
00349     <span class="keywordflow">if</span>(_dup2(hStdOut, _fileno(stdout)) != 0) {
00350     cerr &lt;&lt; <span class="stringliteral">"dup of stdout failed"</span> &lt;&lt; endl;
00351     <span class="keywordflow">return</span> NULL;
00352     }
00353     close(hStdIn);
00354     close(hStdOut);
00355 
00356     <span class="comment">// Tell the parent that it reads from the opposite end of the</span>
00357     <span class="comment">// place where the child writes.</span>
00358     close(data[0]);
00359     FILE *input = fdopen(data[1], <span class="stringliteral">"w"</span>);
00360     setbuf(input, 0);
00361     childpid = pid;
00362     <span class="keywordflow">return</span> input;
00363 
00364 <span class="preprocessor">#else</span>
00365 <span class="preprocessor"></span>    FILE *ret_file = NULL ;
00366 
00367     <span class="keywordtype">int</span> pid, data[2];
00368 
00369     <span class="keywordflow">if</span> (pipe(data) &lt; 0) {
00370     cerr &lt;&lt; <span class="stringliteral">"Could not create IPC channel for compressor process"</span> 
00371          &lt;&lt; endl;
00372     <span class="keywordflow">return</span> NULL;
00373     }
00374     
00375     <span class="keywordflow">if</span> ((pid = fork()) &lt; 0) {
00376     cerr &lt;&lt; <span class="stringliteral">"Could not fork to create compressor process"</span> &lt;&lt; endl;
00377     <span class="keywordflow">return</span> NULL;
00378     }
00379 
00380     <span class="comment">// The parent process closes the write end of the Pipe, and creates a</span>
00381     <span class="comment">// FILE * using fdopen(). The FILE * is used by the calling program to</span>
00382     <span class="comment">// access the read end of the Pipe.</span>
00383 
00384     <span class="keywordflow">if</span> (pid &gt; 0) {      <span class="comment">// Parent, pid is that of the child</span>
00385     close(data[0]);
00386     ret_file = fdopen(data[1], <span class="stringliteral">"w"</span>);
00387     setbuf(ret_file, 0);
00388     childpid = pid;
00389     }
00390     <span class="keywordflow">else</span> {          <span class="comment">// Child</span>
00391     close(data[1]);
00392     dup2(data[0], 0);   <span class="comment">// Read from the pipe...</span>
00393     dup2(fileno(output), 1); <span class="comment">// Write to the FILE *output.</span>
00394 
00395     <a class="code" href="debug_8h.html#a1">DBG</a>(cerr &lt;&lt; <span class="stringliteral">"Opening compression stream."</span> &lt;&lt; endl);
00396 
00397     <span class="comment">// First try to run deflate using DODS_ROOT (the value read from the</span>
00398     <span class="comment">// DODS_ROOT environment variable takes precedence over the value set</span>
00399     <span class="comment">// at build time. If that fails, try the CWD.</span>
00400     string <a class="code" href="EncodingType_8h.html#a3a1">deflate</a> = (string)<a class="code" href="util_8cc.html#a8">dods_root</a>() + <span class="stringliteral">"/etc/deflate"</span>;
00401     (<span class="keywordtype">void</span>) execl(<a class="code" href="EncodingType_8h.html#a3a1">deflate</a>.c_str(), <span class="stringliteral">"deflate"</span>, <span class="stringliteral">"-c"</span>,  <span class="stringliteral">"5"</span>, <span class="stringliteral">"-s"</span>, NULL);
00402     (<span class="keywordtype">void</span>) execl(<span class="stringliteral">"./deflate"</span>, <span class="stringliteral">"deflate"</span>, <span class="stringliteral">"-c"</span>,  <span class="stringliteral">"5"</span>, <span class="stringliteral">"-s"</span>, NULL);
00403     cerr &lt;&lt; <span class="stringliteral">"Warning: Could not start compressor!"</span> &lt;&lt; endl;
00404     cerr &lt;&lt; <span class="stringliteral">"defalte should be in DODS_ROOT/etc or in the CWD!"</span> 
00405          &lt;&lt; endl;
00406     _exit(127);     <span class="comment">// Only here if an error occurred.</span>
00407     }
00408 
00409     <span class="keywordflow">return</span> ret_file ;
00410 <span class="preprocessor">#endif</span>
00411 <span class="preprocessor"></span>}
00412 
00413 <span class="comment">// This function returns a pointer to the system time formated for an httpd</span>
00414 <span class="comment">// log file.</span>
00415 
00416 string
<a name="l00417"></a><a class="code" href="util_8cc.html#a11">00417</a> <a class="code" href="util_8cc.html#a11">systime</a>()
00418 {
00419     time_t TimBin;
00420 
00421     <span class="keywordflow">if</span> (time(&amp;TimBin) == (time_t)-1)
00422     <span class="keywordflow">return</span> string(<span class="stringliteral">"time() error"</span>);
00423     <span class="keywordflow">else</span> {
00424     string TimStr = ctime(&amp;TimBin);
00425     <span class="keywordflow">return</span> TimStr.substr(0, TimStr.size() - 2); <span class="comment">// remove the \n </span>
00426     }
00427 }
00428 
00429 <span class="keywordtype">void</span> 
<a name="l00430"></a><a class="code" href="util_8cc.html#a12">00430</a> <a class="code" href="util_8cc.html#a12">downcase</a>(string &amp;s) 
00431 {
00432     <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;s.length(); i++)
00433     s[i] = tolower(s[i]);
00434 }
00435 
00436 <span class="preprocessor">#ifdef WIN32</span>
00437 <span class="preprocessor"></span><span class="comment">//  Sometimes need to buffer within an iostream under win32 when</span>
00438 <span class="comment">//  we want the output to go to a FILE *.  This is because</span>
00439 <span class="comment">//  it's not possible to associate an ofstream with a FILE *</span>
00440 <span class="comment">//  under the Standard ANSI C++ Library spec.  Unix systems</span>
00441 <span class="comment">//  don't follow the spec in this regard.</span>
00442 <span class="keywordtype">void</span> flush_stream(iostream ios, FILE *out)
00443 {
00444     <span class="keywordtype">int</span> nbytes;
00445     <span class="keywordtype">char</span> buffer[512];
00446 
00447     ios.get(buffer,512,NULL);
00448     <span class="keywordflow">while</span>((nbytes = ios.gcount()) &gt; 0) {
00449     fwrite(buffer, 1, nbytes, out);
00450     ios.get(buffer,512,NULL);
00451     }
00452 
00453     <span class="keywordflow">return</span>; 
00454 }
00455 <span class="preprocessor">#endif</span>
00456 <span class="preprocessor"></span>
00457 <span class="comment">// Jose Garcia</span>
00458 <span class="keywordtype">void</span> 
<a name="l00459"></a><a class="code" href="util_8cc.html#a13">00459</a> <a class="code" href="util_8cc.html#a13">append_long_to_string</a>(<span class="keywordtype">long</span> val, <span class="keywordtype">int</span> base, string &amp;str_val) 
00460 {
00461     <span class="comment">// The array digits contains 36 elements which are the </span>
00462     <span class="comment">// posible valid digits for out bases in the range</span>
00463     <span class="comment">// [2,36]</span>
00464     <span class="keywordtype">char</span> digits[]=<span class="stringliteral">"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span>;
00465     <span class="comment">// result of val / base  </span>
00466     ldiv_t r;                                
00467   
00468     <span class="keywordflow">if</span> (base &gt; 36 || base &lt; 2) {
00469     <span class="comment">// no conversion if wrong base </span>
00470     std::invalid_argument ex(<span class="stringliteral">"The parameter base has an invalid value."</span>);
00471     <span class="keywordflow">throw</span> ex;
00472     }
00473     <span class="keywordflow">if</span> (val &lt; 0)
00474     str_val+= <span class="charliteral">'-'</span>;
00475     r = ldiv (labs(val), base);
00476 
00477     <span class="comment">// output digits of val/base first </span>
00478     <span class="keywordflow">if</span> (r.quot &gt; 0)
00479     <a class="code" href="util_8cc.html#a13">append_long_to_string</a> (r.quot, base, str_val);
00480   
00481     <span class="comment">// output last digit </span>
00482   
00483     str_val+= digits[(<span class="keywordtype">int</span>)r.rem];
00484 }
00485 
00486 <span class="comment">// base defaults to 10</span>
00487 string
<a name="l00488"></a><a class="code" href="util_8cc.html#a14">00488</a> <a class="code" href="util_8cc.html#a14">long_to_string</a>(<span class="keywordtype">long</span> val, <span class="keywordtype">int</span> base)
00489 {
00490     string s;
00491     <a class="code" href="util_8cc.html#a13">append_long_to_string</a>(val, base, s);
00492     <span class="keywordflow">return</span> s;
00493 }
00494 
00495 <span class="comment">// Jose Garcia</span>
<a name="l00496"></a><a class="code" href="util_8cc.html#a15">00496</a> <span class="keywordtype">void</span> <a class="code" href="util_8cc.html#a15">append_double_to_string</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> &amp;num, string &amp;str)
00497 {
00498     <span class="comment">// s having 100 characters should be enough for sprintf to do its job.</span>
00499     <span class="comment">// I want to banish all instances of sprintf. 10/5/2001 jhrg</span>
00500     ostringstream oss;
00501     oss.precision(9);
00502     oss &lt;&lt; num;
00503     str += oss.str();
00504 <span class="preprocessor">#if 0</span>
00505 <span class="preprocessor"></span>    <span class="keywordtype">char</span> s[80];
00506     sprintf(s, <span class="stringliteral">"%.9f"</span>, num);
00507     str+=s;
00508 <span class="preprocessor">#endif</span>
00509 <span class="preprocessor"></span>}
00510 
00511 string
<a name="l00512"></a><a class="code" href="util_8cc.html#a16">00512</a> <a class="code" href="util_8cc.html#a16">double_to_string</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> &amp;num)
00513 {
00514     string s;
00515     <a class="code" href="util_8cc.html#a15">append_double_to_string</a>(num, s);
00516     <span class="keywordflow">return</span> s;
00517 }
00518 
00519 <span class="comment">// Get the version number of the core software. Defining this means that</span>
00520 <span class="comment">// clients of the DAP don't have to rely on config_dap.h for the version</span>
00521 <span class="comment">// number. </span>
00522 string
<a name="l00523"></a><a class="code" href="util_8cc.html#a17">00523</a> <a class="code" href="util_8cc.html#a17">dap_version</a>()
00524 {
00525     <span class="keywordflow">return</span> (string)<a class="code" href="config__dap_8h.html#a11">DVR</a>;
00526 }
00527 
00528 <span class="comment">// Given a pathname, return the file at the end of the path. This is used</span>
00529 <span class="comment">// when reporting errors (maybe other times, too) to keep the server from</span>
00530 <span class="comment">// revealing too much about its organization when sending error responses</span>
00531 <span class="comment">// back to clients. 10/11/2000 jhrg</span>
00532 <span class="comment">// MT-safe. 08/05/02 jhrg</span>
00533 
00534 <span class="preprocessor">#ifdef WIN32</span>
00535 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> path_sep[]={<span class="stringliteral">"\\"</span>};
00536 <span class="preprocessor">#else</span>
00537 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> path_sep[]={<span class="stringliteral">"/"</span>};
00538 <span class="preprocessor">#endif</span>
00539 <span class="preprocessor"></span>
00540 string
<a name="l00541"></a><a class="code" href="util_8cc.html#a18">00541</a> <a class="code" href="util_8cc.html#a18">path_to_filename</a>(string path)
00542 {
00543     string::size_type pos = path.rfind(path_sep);
00544   
00545     <span class="keywordflow">return</span> (pos == string::npos) ? path : path.substr(++pos);
00546 }
00547 
00548 <span class="comment">// Look around for a reasonable place to put a temporary file. Check first</span>
00549 <span class="comment">// the value of the TMPDIR env var. If that does not yeild a path that's</span>
00550 <span class="comment">// writable (as defined by access(..., W_OK|R_OK)) then look at P_tmpdir (as</span>
00551 <span class="comment">// defined in stdio.h. If both come up empty, then use `./'.</span>
00552 <span class="comment">//</span>
00553 <span class="comment">// This function allocates storage using new. The caller must delete the char</span>
00554 <span class="comment">// array. </span>
00555 <span class="keywordtype">char</span> *
<a name="l00556"></a><a class="code" href="util_8cc.html#a19">00556</a> <a class="code" href="util_8cc.html#a19">get_tempfile_template</a>(<span class="keywordtype">char</span> *file_template)
00557 {
00558     <span class="keywordtype">char</span> *c;
00559 <span class="preprocessor">#ifdef WIN32</span>
00560 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (getenv(<span class="stringliteral">"TEMP"</span>) &amp;&amp; (access(getenv(<span class="stringliteral">"TEMP"</span>), 6) == 0)) 
00561     c = getenv(<span class="stringliteral">"TEMP"</span>);
00562 <span class="preprocessor">#else</span>
00563 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (getenv(<span class="stringliteral">"TMPDIR"</span>) &amp;&amp; (access(getenv(<span class="stringliteral">"TMPDIR"</span>), W_OK|R_OK) == 0)) 
00564     c = getenv(<span class="stringliteral">"TMPDIR"</span>);
00565 <span class="preprocessor">#ifdef P_tmpdir</span>
00566 <span class="preprocessor"></span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (access(P_tmpdir, W_OK|R_OK) == 0)
00567     c = P_tmpdir;
00568 <span class="preprocessor">#endif</span>
00569 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00570 <span class="preprocessor"></span>    <span class="keywordflow">else</span> 
00571     c = <span class="stringliteral">"."</span>;
00572 
00573     <span class="keywordtype">char</span> *temp = <span class="keyword">new</span> <span class="keywordtype">char</span>[strlen(c) + strlen(file_template) + 2];
00574     strcpy(temp, c);
00575     strcat(temp, <span class="stringliteral">"/"</span>);
00576     strcat(temp, file_template);
00577 
00578     <span class="keywordflow">return</span> temp;
00579 }
00580 
00581 <span class="comment">// $Log: util_8cc-source.html,v $
00581 <span class="comment">// Revision 1.4  2004/02/05 06:51:21  jimg
00581 <span class="comment">// Added/update.
00581 <span class="comment">//</span>
00582 <span class="comment">// Revision 1.76.2.4  2003/09/06 23:02:50  jimg</span>
00583 <span class="comment">// Updated the documentation.</span>
00584 <span class="comment">//</span>
00585 <span class="comment">// Revision 1.76.2.3  2003/07/25 06:04:28  jimg</span>
00586 <span class="comment">// Refactored the code so that DDS:send() is now incorporated into</span>
00587 <span class="comment">// DODSFilter::send_data(). The old DDS::send() is still there but is</span>
00588 <span class="comment">// depracated.</span>
00589 <span class="comment">// Added 'smart timeouts' to all the variable classes. This means that</span>
00590 <span class="comment">// the new server timeouts are active only for the data read and CE</span>
00591 <span class="comment">// evaluation. This went inthe BaseType::serialize() methods because it</span>
00592 <span class="comment">// needed to time both the read() calls and the dds::eval() calls.</span>
00593 <span class="comment">//</span>
00594 <span class="comment">// Revision 1.76.2.2  2003/06/23 01:31:19  rmorris</span>
00595 <span class="comment">// Migrated new_xdrstdio, set_xdrstdio and delete_xdrstdio conditionally</span>
00596 <span class="comment">// out into a separate (C) source file for use in the case of the POWERPC/OSX.</span>
00597 <span class="comment">//</span>
00598 <span class="comment">// Revision 1.76.2.1  2003/06/05 20:15:26  jimg</span>
00599 <span class="comment">// Removed many uses of strstream and replaced them with stringstream.</span>
00600 <span class="comment">//</span>
00601 <span class="comment">// Revision 1.76  2003/04/22 19:40:29  jimg</span>
00602 <span class="comment">// Merged with 3.3.1.</span>
00603 <span class="comment">//</span>
00604 <span class="comment">// Revision 1.75  2003/02/27 23:17:56  jimg</span>
00605 <span class="comment">// Changed prune_spaces() so taht it takes a const string &amp;.</span>
00606 <span class="comment">//</span>
00607 <span class="comment">// Revision 1.74  2003/02/21 00:14:25  jimg</span>
00608 <span class="comment">// Repaired copyright.</span>
00609 <span class="comment">//</span>
00610 <span class="comment">// Revision 1.73.2.1  2003/02/21 00:10:08  jimg</span>
00611 <span class="comment">// Repaired copyright.</span>
00612 <span class="comment">//</span>
00613 <span class="comment">// Revision 1.73  2003/01/23 00:22:25  jimg</span>
00614 <span class="comment">// Updated the copyright notice; this implementation of the DAP is</span>
00615 <span class="comment">// copyrighted by OPeNDAP, Inc.</span>
00616 <span class="comment">//</span>
00617 <span class="comment">// Revision 1.72  2003/01/10 19:46:41  jimg</span>
00618 <span class="comment">// Merged with code tagged release-3-2-10 on the release-3-2 branch. In many</span>
00619 <span class="comment">// cases files were added on that branch (so they appear on the trunk for</span>
00620 <span class="comment">// the first time).</span>
00621 <span class="comment">//</span>
00622 <span class="comment">// Revision 1.65.2.19  2002/12/17 22:35:03  pwest</span>
00623 <span class="comment">// Added and updated methods using stdio. Deprecated methods using iostream.</span>
00624 <span class="comment">//</span>
00625 <span class="comment">// Revision 1.65.2.18  2002/11/06 21:53:06  jimg</span>
00626 <span class="comment">// I changed the includes of Regex.h from &lt;Regex.h&gt; to "Regex.h". This means</span>
00627 <span class="comment">// make depend will include the header in the list of dependencies.</span>
00628 <span class="comment">//</span>
00629 <span class="comment">// Revision 1.65.2.17  2002/10/23 17:40:39  jimg</span>
00630 <span class="comment">// Added compile-time switch for time.h versus sys/time.h.</span>
00631 <span class="comment">//</span>
00632 <span class="comment">// Revision 1.65.2.16  2002/10/18 22:52:00  jimg</span>
00633 <span class="comment">// Combined some win32 #ifdefs and removed an unused global variable.</span>
00634 <span class="comment">//</span>
00635 <span class="comment">// Revision 1.65.2.15  2002/09/22 14:34:20  rmorris</span>
00636 <span class="comment">// VC++ considers 'x' in 'for(int x,...)' to not be just for that scope of the</span>
00637 <span class="comment">// block associated with that for.  When there are multiple of such type of</span>
00638 <span class="comment">// thing - VC++ see redeclarations of the same var - moved to use different</span>
00639 <span class="comment">// var names to prevent the error.</span>
00640 <span class="comment">//</span>
00641 <span class="comment">// Revision 1.65.2.14  2002/09/05 22:52:55  pwest</span>
00642 <span class="comment">// Replaced the GNU data structures SLList and DLList with the STL container</span>
00643 <span class="comment">// class vector&lt;&gt;. To maintain use of Pix, changed the Pix.h header file to</span>
00644 <span class="comment">// redefine Pix to be an IteratorAdapter. Usage remains the same and all code</span>
00645 <span class="comment">// outside of the DAP should compile and link with no problems. Added methods</span>
00646 <span class="comment">// to the different classes where Pix is used to include methods to use STL</span>
00647 <span class="comment">// iterators. Replaced the use of Pix within the DAP to use iterators instead.</span>
00648 <span class="comment">// Updated comments for documentation, updated the test suites, and added some</span>
00649 <span class="comment">// unit tests. Updated the Makefile to remove GNU/SLList and GNU/DLList.</span>
00650 <span class="comment">//</span>
00651 <span class="comment">// Revision 1.65.2.13  2002/08/22 21:23:23  jimg</span>
00652 <span class="comment">// Fixes for the Win32 Build made at ESRI by Vlad Plenchoy and myslef.</span>
00653 <span class="comment">//</span>
00654 <span class="comment">// Revision 1.65.2.12  2002/08/08 06:54:57  jimg</span>
00655 <span class="comment">// Changes for thread-safety. In many cases I found ugly places at the</span>
00656 <span class="comment">// tops of files while looking for globals, et c., and I fixed them up</span>
00657 <span class="comment">// (hopefully making them easier to read, ...). Only the files RCReader.cc</span>
00658 <span class="comment">// and usage.cc actually use pthreads synchronization functions. In other</span>
00659 <span class="comment">// cases I removed static objects where they were used for supposed</span>
00660 <span class="comment">// improvements in efficiency which had never actually been verifiied (and</span>
00661 <span class="comment">// which looked dubious).</span>
00662 <span class="comment">//</span>
00663 <span class="comment">// Revision 1.65.2.11  2002/08/06 23:22:33  jimg</span>
00664 <span class="comment">// Removed systime() because it's not used by the library and it's not</span>
00665 <span class="comment">// MT-Safe. If this is used by any of the servers, I'll recode the function</span>
00666 <span class="comment">// so that it returns a string.</span>
00667 <span class="comment">//</span>
00668 <span class="comment">// Revision 1.71  2002/06/03 22:21:16  jimg</span>
00669 <span class="comment">// Merged with release-3-2-9</span>
00670 <span class="comment">//</span>
00671 <span class="comment">// Revision 1.65.2.10  2002/02/04 00:35:33  rmorris</span>
00672 <span class="comment">// Ported some newer code to win32.  In win32 W_OK, etc are not available -</span>
00673 <span class="comment">// a digit is just used per MSDN.  Also had it look for the TEMP environment</span>
00674 <span class="comment">// var under win32 instead of the TMPDIR env var under unix.</span>
00675 <span class="comment">//</span>
00676 <span class="comment">// Revision 1.65.2.9  2002/01/28 20:34:25  jimg</span>
00677 <span class="comment">// *** empty log message ***</span>
00678 <span class="comment">//</span>
00679 <span class="comment">// Revision 1.70  2001/10/14 01:28:38  jimg</span>
00680 <span class="comment">// Merged with release-3-2-8.</span>
00681 <span class="comment">//</span>
00682 <span class="comment">// Revision 1.65.2.8  2001/10/08 16:55:59  jimg</span>
00683 <span class="comment">// I replaced the sprintf-based implementation of append_double_to_string with</span>
00684 <span class="comment">// one based on ostrstreams. sprintf was causing too many problems in other</span>
00685 <span class="comment">// places.</span>
00686 <span class="comment">//</span>
00687 <span class="comment">// Revision 1.69  2001/09/28 17:50:07  jimg</span>
00688 <span class="comment">// Merged with 3.2.7.</span>
00689 <span class="comment">//</span>
00690 <span class="comment">// Revision 1.65.2.7  2001/09/25 20:13:39  jimg</span>
00691 <span class="comment">// Added debug.h include.</span>
00692 <span class="comment">//</span>
00693 <span class="comment">// Revision 1.68  2001/08/24 17:46:23  jimg</span>
00694 <span class="comment">// Resolved conflicts from the merge of release 3.2.6</span>
00695 <span class="comment">//</span>
00696 <span class="comment">// Revision 1.65.2.6  2001/08/17 23:59:14  jimg</span>
00697 <span class="comment">// Removed WIN32 compile guards from using statements.</span>
00698 <span class="comment">// Changed some formatting to comply with K&amp;R style.</span>
00699 <span class="comment">//</span>
00700 <span class="comment">// Revision 1.65.2.5  2001/07/28 01:10:42  jimg</span>
00701 <span class="comment">// Some of the numeric type classes did not have copy ctors or operator=.</span>
00702 <span class="comment">// I added those where they were needed.</span>
00703 <span class="comment">// In every place where delete (or delete []) was called, I set the pointer</span>
00704 <span class="comment">// just deleted to zero. Thus if for some reason delete is called again</span>
00705 <span class="comment">// before new memory is allocated there won't be a mysterious crash. This is</span>
00706 <span class="comment">// just good form when using delete.</span>
00707 <span class="comment">// I added calls to www2id and id2www where appropriate. The DAP now handles</span>
00708 <span class="comment">// making sure that names are escaped and unescaped as needed. Connect is</span>
00709 <span class="comment">// set to handle CEs that contain names as they are in the dataset (see the</span>
00710 <span class="comment">// comments/Log there). Servers should not handle escaping or unescaping</span>
00711 <span class="comment">// characters on their own.</span>
00712 <span class="comment">//</span>
00713 <span class="comment">// Revision 1.67  2001/06/15 23:49:04  jimg</span>
00714 <span class="comment">// Merged with release-3-2-4.</span>
00715 <span class="comment">//</span>
00716 <span class="comment">// Revision 1.65.2.4  2001/05/31 17:12:36  jimg</span>
00717 <span class="comment">// Fixed dods_progress().</span>
00718 <span class="comment">//</span>
00719 <span class="comment">// Revision 1.65.2.3  2001/05/25 20:53:18  jimg</span>
00720 <span class="comment">// Changed the environment variable read by dods_progress(). I doubt anyone</span>
00721 <span class="comment">// uses this function, but just in case...</span>
00722 <span class="comment">//</span>
00723 <span class="comment">// Revision 1.65.2.2  2001/05/04 21:59:58  jimg</span>
00724 <span class="comment">// Ripped out the (lame) tests and moved them to the (less lame)</span>
00725 <span class="comment">// generalUtilTest.cc unit tests.</span>
00726 <span class="comment">//</span>
00727 <span class="comment">// Revision 1.66  2001/01/26 19:48:10  jimg</span>
00728 <span class="comment">// Merged with release-3-2-3.</span>
00729 <span class="comment">//</span>
00730 <span class="comment">// Revision 1.65.2.1  2000/11/30 05:24:46  jimg</span>
00731 <span class="comment">// Significant changes and improvements to the AttrTable and DAS classes. DAS</span>
00732 <span class="comment">// now is a child of AttrTable, which makes attributes behave uniformly at</span>
00733 <span class="comment">// all levels of the DAS object. Alias now work. I've added unit tests for</span>
00734 <span class="comment">// several methods in AttrTable and some of the functions in parser-util.cc.</span>
00735 <span class="comment">// In addition, all of the DAS tests now work.</span>
00736 <span class="comment">//</span>
00737 <span class="comment">// Revision 1.65  2000/10/30 17:21:28  jimg</span>
00738 <span class="comment">// Added support for proxy servers (from cjm).</span>
00739 <span class="comment">//</span>
00740 <span class="comment">// Revision 1.64  2000/10/03 21:03:22  jimg</span>
00741 <span class="comment">// Added dap_version() function</span>
00742 <span class="comment">//</span>
00743 <span class="comment">// Revision 1.63  2000/09/22 02:17:23  jimg</span>
00744 <span class="comment">// Rearranged source files so that the CVS logs appear at the end rather than</span>
00745 <span class="comment">// the start. Also made the ifdef guard symbols use the same naming scheme and</span>
00746 <span class="comment">// wrapped headers included in other headers in those guard symbols (to cut</span>
00747 <span class="comment">// down on extraneous file processing - See Lakos).</span>
00748 <span class="comment">//</span>
00749 <span class="comment">// Revision 1.62  2000/09/21 16:22:10  jimg</span>
00750 <span class="comment">// Merged changes from Jose Garcia that add exceptions to the software.</span>
00751 <span class="comment">// Many methods that returned error codes now throw exectptions. There are</span>
00752 <span class="comment">// two classes which are thrown by the software, Error and InternalErr.</span>
00753 <span class="comment">// InternalErr is used to report errors within the library or errors using</span>
00754 <span class="comment">// the library. Error is used to reprot all other errors. Since InternalErr</span>
00755 <span class="comment">// is a subclass of Error, programs need only to catch Error.</span>
00756 <span class="comment">//</span>
00757 <span class="comment">// Revision 1.61  2000/07/10 00:19:32  rmorris</span>
00758 <span class="comment">// Removed (trivial) explicit mention of namespace for iostream in</span>
00759 <span class="comment">// flush_stream().</span>
00760 <span class="comment">//</span>
00761 <span class="comment">// Revision 1.60  2000/07/09 22:05:37  rmorris</span>
00762 <span class="comment">// Changes to increase portability, minimize ifdef's for win32 and account</span>
00763 <span class="comment">// for differences in the iostreams implementations.</span>
00764 <span class="comment">//</span>
00765 <span class="comment">// Revision 1.58  2000/06/16 18:50:19  jimg</span>
00766 <span class="comment">// Fixes leftover from the last merge plus needed for the merge with version</span>
00767 <span class="comment">// 3.1.7.</span>
00768 <span class="comment">//</span>
00769 <span class="comment">// Revision 1.57  2000/06/16 18:15:01  jimg</span>
00770 <span class="comment">// Merged with 3.1.7</span>
00771 <span class="comment">//</span>
00772 <span class="comment">// Revision 1.55.4.1  2000/06/14 16:59:54  jimg</span>
00773 <span class="comment">// Added a new varient of unique_names for DLLists.</span>
00774 <span class="comment">//</span>
00775 <span class="comment">// Revision 1.56  2000/06/07 18:07:01  jimg</span>
00776 <span class="comment">// Merged the pc port branch</span>
00777 <span class="comment">//</span>
00778 <span class="comment">// Revision 1.55.18.1  2000/06/02 18:39:04  rmorris</span>
00779 <span class="comment">// Mod's for port to win32.</span>
00780 <span class="comment">//</span>
00781 <span class="comment">// Revision 1.55  1999/05/21 17:21:21  jimg</span>
00782 <span class="comment">// Removed a bogus error message about failure to run deflate.</span>
00783 <span class="comment">//</span>
00784 <span class="comment">// Revision 1.54  1999/05/04 19:47:24  jimg</span>
00785 <span class="comment">// Fixed copyright statements. Removed more of the GNU classes.</span>
00786 <span class="comment">//</span>
00787 <span class="comment">// Revision 1.53  1999/04/29 03:04:52  jimg</span>
00788 <span class="comment">// Merged ferret changes</span>
00789 <span class="comment">//</span>
00790 <span class="comment">// Revision 1.52  1999/04/29 02:29:37  jimg</span>
00791 <span class="comment">// Merge of no-gnu branch</span>
00792 <span class="comment">//</span>
00793 <span class="comment">// Revision 1.51.4.1  1999/04/21 21:56:25  jimg</span>
00794 <span class="comment">// Work-around in prune_spaces(). There is a bug in the old code and I</span>
00795 <span class="comment">// patched it be calling the new (string based) version. Since we're</span>
00796 <span class="comment">// switching over to that anyway, it seemed the kludge will be temporary.</span>
00797 <span class="comment">//</span>
00798 <span class="comment">// Revision 1.51  1999/03/24 23:23:44  jimg</span>
00799 <span class="comment">// Removed the *_ops code. Those operations are now done by the template</span>
00800 <span class="comment">// classes and function(s) in Operators.h.</span>
00801 <span class="comment">// Removed old code.</span>
00802 <span class="comment">//</span>
00803 <span class="comment">// Revision 1.50  1999/03/09 00:23:16  jimg</span>
00804 <span class="comment">// Fixed the error messages in compressor().</span>
00805 <span class="comment">//</span>
00806 <span class="comment">// Revision 1.55.12.1  2000/03/08 00:09:04  jgarcia</span>
00807 <span class="comment">// replace ostrstream with string;added functions to convert from double and</span>
00808 <span class="comment">// long to string</span>
00809 <span class="comment">//</span>
00810 <span class="comment">// Revision 1.49  1999/01/21 02:10:57  jimg</span>
00811 <span class="comment">// Moved various CE functions to the file ce_functions.cc/.h.</span>
00812 <span class="comment">//</span>
00813 <span class="comment">// Revision 1.48  1998/11/10 00:47:01  jimg</span>
00814 <span class="comment">// Fixed a number of memory leaks (found using purify).</span>
00815 <span class="comment">//</span>
00816 <span class="comment">// Revision 1.47  1998/09/02 23:59:11  jimg</span>
00817 <span class="comment">// Removed func_date to avoid conflicts with a copy in ff-dods-2.15.</span>
00818 <span class="comment">//</span>
00819 <span class="comment">// Revision 1.46.6.2  1999/02/05 09:32:37  jimg</span>
00820 <span class="comment">// Fixed __unused__ so that it not longer clashes with Red Hat 5.2 inlined</span>
00821 <span class="comment">// math code.</span>
00822 <span class="comment">//</span>
00823 <span class="comment">// Revision 1.46.6.1  1999/02/02 21:57:08  jimg</span>
00824 <span class="comment">// String to string version</span>
00825 <span class="comment">//</span>
00826 <span class="comment">// Revision 1.46  1998/04/07 22:12:49  jimg</span>
00827 <span class="comment">// Added prune_spaces(String) function. This can be used to remove leading</span>
00828 <span class="comment">// spaces from URLs and their embedded CEs (i.e., spaces between the ? and</span>
00829 <span class="comment">// the start of the CE). Doing this before passing the URL/CE into the web</span>
00830 <span class="comment">// library prevents various nasty crashes. This function is called by</span>
00831 <span class="comment">// Connect's default ctor. Users of Connect don't have to call it.</span>
00832 <span class="comment">//</span>
00833 <span class="comment">// Revision 1.45  1998/02/11 20:28:17  jimg</span>
00834 <span class="comment">// Added/fixed support for on-the-fly compression of data. The current code</span>
00835 <span class="comment">// uses a subprocess to run a compression filter, deflate, which uses the LZW</span>
00836 <span class="comment">// compression algorithm in zlib 1.0.4.</span>
00837 <span class="comment">//</span>
00838 <span class="comment">// Revision 1.44  1998/02/05 20:14:09  jimg</span>
00839 <span class="comment">// DODS now compiles with gcc 2.8.x</span>
00840 <span class="comment">//</span>
00841 <span class="comment">// Revision 1.43  1997/07/15 21:57:13  jimg</span>
00842 <span class="comment">// Fixed error message text for length function.</span>
00843 <span class="comment">//</span>
00844 <span class="comment">// Revision 1.42  1997/06/06 17:52:20  jimg</span>
00845 <span class="comment">// Last minute changes for version 2.14</span>
00846 <span class="comment">//</span>
00847 <span class="comment">// Revision 1.41  1997/06/05 23:04:33  jimg</span>
00848 <span class="comment">// Fixed the decompressor() function - made int data[2] automatic instead of</span>
00849 <span class="comment">// static.</span>
00850 <span class="comment">// Fixed the spelling mistake in the function names compressor and</span>
00851 <span class="comment">// decompressor.</span>
00852 <span class="comment">//</span>
00853 <span class="comment">// Revision 1.40  1997/05/13 23:40:07  jimg</span>
00854 <span class="comment">// Added instrumentation for function decompressor().</span>
00855 <span class="comment">//</span>
00856 <span class="comment">// Revision 1.39  1997/05/01 18:54:35  jimg</span>
00857 <span class="comment">// Fixed an error in date_func where argv[0] was used as a BaseType instead of</span>
00858 <span class="comment">// a BaseType *.</span>
00859 <span class="comment">//</span>
00860 <span class="comment">// Revision 1.38  1997/03/27 18:18:28  jimg</span>
00861 <span class="comment">// Added dods_progress() function that looks for an environment variable to</span>
00862 <span class="comment">// see if the user wants the progress indicator visible. Thus, they can use</span>
00863 <span class="comment">// one environment variable to control the GUI as a whole or this one to</span>
00864 <span class="comment">// control just the progress indicator.</span>
00865 <span class="comment">//</span>
00866 <span class="comment">// Revision 1.37  1997/03/08 18:58:22  jimg</span>
00867 <span class="comment">// Changed name of function unique() to unique_names() to avoid a conflict</span>
00868 <span class="comment">// with the STL.</span>
00869 <span class="comment">//</span>
00870 <span class="comment">// Revision 1.36  1997/02/28 01:24:28  jimg</span>
00871 <span class="comment">// Added String &amp;msg parameter to unique(). Instead of writing messages to</span>
00872 <span class="comment">// cerr, messages are now written to this string object.</span>
00873 <span class="comment">//</span>
00874 <span class="comment">// Revision 1.35  1997/02/19 02:09:47  jimg</span>
00875 <span class="comment">// Added childpid parameter.</span>
00876 <span class="comment">//</span>
00877 <span class="comment">// Revision 1.34  1997/02/10 02:38:42  jimg</span>
00878 <span class="comment">// Added assert() calls for pointers.</span>
00879 <span class="comment">// Added code to fix warnings about comparisons between int and unsigned</span>
00880 <span class="comment">// numbers.</span>
00881 <span class="comment">// Changed return type of dods_root() from String to char *.</span>
00882 <span class="comment">//</span>
00883 <span class="comment">// Revision 1.33  1996/12/02 23:20:29  jimg</span>
00884 <span class="comment">// func_member now does the right thing with the dds by sending dds.filename()</span>
00885 <span class="comment">// to ops().</span>
00886 <span class="comment">//</span>
00887 <span class="comment">// Revision 1.32  1996/12/02 19:45:58  jimg</span>
00888 <span class="comment">// Added versions of int_ops for various combinations of signed and unsigned</span>
00889 <span class="comment">// operands. Ignore the warnings about comparisons between signed and</span>
00890 <span class="comment">// unsigned...</span>
00891 <span class="comment">//</span>
00892 <span class="comment">// Revision 1.31  1996/11/27 22:40:29  jimg</span>
00893 <span class="comment">// Added DDS as third parameter to function in the CE evaluator</span>
00894 <span class="comment">//</span>
00895 <span class="comment">// Revision 1.30  1996/11/25 03:44:39  jimg</span>
00896 <span class="comment">// Added new dods_root function.</span>
00897 <span class="comment">// Fixed compressor().</span>
00898 <span class="comment">// Fixed systime().</span>
00899 <span class="comment">//</span>
00900 <span class="comment">// Revision 1.29  1996/11/21 23:56:21  jimg</span>
00901 <span class="comment">// Added compressor and decompressor functions.</span>
00902 <span class="comment">//</span>
00903 <span class="comment">// Revision 1.28  1996/11/13 19:23:17  jimg</span>
00904 <span class="comment">// Fixed debugging.</span>
00905 <span class="comment">//</span>
00906 <span class="comment">// Revision 1.27 1996/09/12 00:21:30 jimg Fixed two errors in xdr_str: 1) Use</span>
00907 <span class="comment">// of max_str_len as an array dimension (max_str_len is approx 4e9; a large</span>
00908 <span class="comment">// array by most standards...) and 2) use of storage on the stack for the</span>
00909 <span class="comment">// return string. Now xdr_strings internal allocation mechanism (which uses</span>
00910 <span class="comment">// malloc) is used to create the space needed by the incoming string. After</span>
00911 <span class="comment">// that string is copied to the String object parameter it is freed using</span>
00912 <span class="comment">// free() (Not xdr_free() as the SunOS 4 man page erroneously suggests).</span>
00913 <span class="comment">//</span>
00914 <span class="comment">// Revision 1.26  1996/08/13 20:46:39  jimg</span>
00915 <span class="comment">// Added the *_ops() functions (moved from various class files).</span>
00916 <span class="comment">//</span>
00917 <span class="comment">// Revision 1.25  1996/07/15 20:30:35  jimg</span>
00918 <span class="comment">// Added not_used to rcsid to suppress warnings from g++ -Wall. Fixed a bug</span>
00919 <span class="comment">// in xdr_str(): a pointer to the decoded string was assigned to the formal</span>
00920 <span class="comment">// parameter BUF instead of the string value itself.</span>
00921 <span class="comment">//</span>
00922 <span class="comment">// Revision 1.24  1996/05/31 23:31:09  jimg</span>
00923 <span class="comment">// Updated copyright notice.</span>
00924 <span class="comment">//</span>
00925 <span class="comment">// Revision 1.23  1996/05/29 22:08:59  jimg</span>
00926 <span class="comment">// Made changes necessary to support CEs that return the value of a function</span>
00927 <span class="comment">// instead of the value of a variable. This was done so that it would be</span>
00928 <span class="comment">// possible to translate Sequences into Arrays without first reading the</span>
00929 <span class="comment">// entire sequence over the network.</span>
00930 <span class="comment">//</span>
00931 <span class="comment">// Revision 1.22  1996/05/22 18:05:45  jimg</span>
00932 <span class="comment">// Merged files from the old netio directory into the dap directory.</span>
00933 <span class="comment">// Removed the errmsg library from the software.</span>
00934 <span class="comment">//</span>
00935 <span class="comment">// Revision 1.21  1996/05/14 15:39:09  jimg</span>
00936 <span class="comment">// These changes have already been checked in once before. However, I</span>
00937 <span class="comment">// corrupted the source repository and restored it from a 5/9/96 backup</span>
00938 <span class="comment">// tape. The previous version's log entry should cover the changes.</span>
00939 <span class="comment">//</span>
00940 <span class="comment">// Revision 1.20  1996/04/05 00:22:24  jimg</span>
00941 <span class="comment">// Compiled with g++ -Wall and fixed various warnings.</span>
00942 <span class="comment">//</span>
00943 <span class="comment">// Revision 1.19  1996/04/04 17:52:36  jimg</span>
00944 <span class="comment">// Merged changes from version 1.1.1.</span>
00945 <span class="comment">//</span>
00946 <span class="comment">// Revision 1.18  1996/03/02 01:13:47  jimg</span>
00947 <span class="comment">// Fixed problems with case labels and local variables.</span>
00948 <span class="comment">//</span>
00949 <span class="comment">// Revision 1.17  1996/02/02 00:31:24  jimg</span>
00950 <span class="comment">// Merge changes for DODS-1.1.0 into DODS-2.x</span>
00951 <span class="comment">//</span>
00952 <span class="comment">// Revision 1.16  1995/12/06  18:36:23  jimg</span>
00953 <span class="comment">// Added text_to_temp(). This copies the given String to a temporary file and</span>
00954 <span class="comment">// returns a FILE * to that file. The file is unlinked, so one the FILE * is</span>
00955 <span class="comment">// closed, it is removed from the file system.</span>
00956 <span class="comment">//</span>
00957 <span class="comment">// Revision 1.15  1995/10/23  23:06:07  jimg</span>
00958 <span class="comment">// Fixed cast of out_tmp in xdr_str().</span>
00959 <span class="comment">//</span>
00960 <span class="comment">// Revision 1.14  1995/08/26  00:32:10  jimg</span>
00961 <span class="comment">// Removed code enclosed in #ifdef NEVER #endif.</span>
00962 <span class="comment">//</span>
00963 <span class="comment">// Revision 1.13  1995/08/23  00:41:58  jimg</span>
00964 <span class="comment">// xdr_str() now takes a String &amp; instead of a String ** for arg 2.</span>
00965 <span class="comment">//</span>
00966 <span class="comment">// Revision 1.12.2.7  1996/02/23 21:37:33  jimg</span>
00967 <span class="comment">// Updated for new configure.in.</span>
00968 <span class="comment">// Fixed problems on Solaris 2.4.</span>
00969 <span class="comment">//</span>
00970 <span class="comment">// Revision 1.12.2.6  1995/10/12  17:01:43  jimg</span>
00971 <span class="comment">// Added {}'s to case statements so that gcc-2.7.0 won't complain about jumping</span>
00972 <span class="comment">// over case statement labels. This only happens when returning values from</span>
00973 <span class="comment">// variable defined within a case label. It is better to use the {}'s than move</span>
00974 <span class="comment">// the definition of the variable.</span>
00975 <span class="comment">//</span>
00976 <span class="comment">// Revision 1.12.2.5  1995/09/29  19:28:04  jimg</span>
00977 <span class="comment">// Fixed problems with xdr.h on an SGI. Fixed conflict of d_int32_t (which</span>
00978 <span class="comment">// was in an enum type defined by BaseType) on the SGI.</span>
00979 <span class="comment">//</span>
00980 <span class="comment">// Revision 1.12.2.4  1995/09/27  23:17:20  jimg</span>
00981 <span class="comment">// Fixed casts again...</span>
00982 <span class="comment">//</span>
00983 <span class="comment">// Revision 1.12.2.3  1995/09/27  21:49:06  jimg</span>
00984 <span class="comment">// Fixed casts.</span>
00985 <span class="comment">//</span>
00986 <span class="comment">// Revision 1.12.2.2  1995/09/27  19:07:01  jimg</span>
00987 <span class="comment">// Add casts to `cast away' const and unsigned in places where we call various</span>
00988 <span class="comment">// xdr functions (which don't know about, or use, const or unsigned.</span>
00989 <span class="comment">//</span>
00990 <span class="comment">// Revision 1.12.2.1  1995/09/14  20:57:25  jimg</span>
00991 <span class="comment">// Moved variable initializations in xdr_str() and xdr_str_array() out of the</span>
00992 <span class="comment">// switch statement to avoid complaint from gcc 2.7.0 about initializations</span>
00993 <span class="comment">// crossing case labels.</span>
00994 <span class="comment">// Moved some loop index variables out of the loop statement.</span>
00995 <span class="comment">//</span>
00996 <span class="comment">// Revision 1.12  1995/07/09  21:29:28  jimg</span>
00997 <span class="comment">// Added copyright notice.</span>
00998 <span class="comment">//</span>
00999 <span class="comment">// Revision 1.11  1995/05/10  15:34:09  jimg</span>
01000 <span class="comment">// Failed to change `config.h' to `config_dap.h' in these files.</span>
01001 <span class="comment">//</span>
01002 <span class="comment">// Revision 1.10  1995/05/10  13:45:46  jimg</span>
01003 <span class="comment">// Changed the name of the configuration header file from `config.h' to</span>
01004 <span class="comment">// `config_dap.h' so that other libraries could have header files which were</span>
01005 <span class="comment">// installed in the DODS include directory without overwriting this one. Each</span>
01006 <span class="comment">// config header should follow the convention config_&lt;name&gt;.h.</span>
01007 <span class="comment">//</span>
01008 <span class="comment">// Revision 1.9  1995/03/16  17:39:19  jimg</span>
01009 <span class="comment">// Added TRACE_NEW/dbnew checks. This includes a special kluge for the</span>
01010 <span class="comment">// placement new operator.</span>
01011 <span class="comment">//</span>
01012 <span class="comment">// Revision 1.8  1995/03/04  15:30:11  jimg</span>
01013 <span class="comment">// Fixed List so that it will compile - it still has major bugs.</span>
01014 <span class="comment">// Modified Makefile.in so that test cases include List even though List</span>
01015 <span class="comment">// won't work (but at least the test cases will link and run, so long</span>
01016 <span class="comment">// as you don't try to do anything with Lists...</span>
01017 <span class="comment">//</span>
01018 <span class="comment">// Revision 1.7  1995/03/04  14:36:48  jimg</span>
01019 <span class="comment">// Fixed xdr_str so that it works with the new String objects.</span>
01020 <span class="comment">// Added xdr_str_array for use with arrays of String objects.</span>
01021 <span class="comment">//</span>
01022 <span class="comment">// Revision 1.6  1995/02/10  03:27:07  jimg</span>
01023 <span class="comment">// Removed xdr_url() since it was just a copy of xdr_str().</span>
01024 <span class="comment">//</span>
01025 <span class="comment">// Revision 1.5  1995/01/11  16:10:47  jimg</span>
01026 <span class="comment">// Added to new functions which manage XDR stdio stream pointers. One creates</span>
01027 <span class="comment">// a new xdrstdio pointer associated wit the given FILE * and the other</span>
01028 <span class="comment">// deletes it. The creation function returns the XDR *, so it can be used to</span>
01029 <span class="comment">// initialize a new XDR * (see BaseType.cc).</span>
01030 <span class="comment">//</span>
01031 <span class="comment">// Revision 1.4  1994/11/29  20:21:23  jimg</span>
01032 <span class="comment">// Added xdr_str and xdr_url functions (C linkage). These provide a way for</span>
01033 <span class="comment">// the Str and Url classes to en/decode strings (Urls are effectively strings)</span>
01034 <span class="comment">// with only two parameters. Thus the Array ad List classes might actually</span>
01035 <span class="comment">// work as planned.</span>
01036 <span class="comment">//</span>
01037 <span class="comment">// Revision 1.3  1994/11/22  14:06:22  jimg</span>
01038 <span class="comment">// Added code for data transmission to parts of the type hierarchy. Not</span>
01039 <span class="comment">// complete yet.</span>
01040 <span class="comment">// Fixed erros in type hierarchy headers (typos, incorrect comments, ...).</span>
01041 <span class="comment">//</span>
01042 <span class="comment">// Revision 1.2  1994/10/18  00:25:36  jimg</span>
01043 <span class="comment">// Fixed error in char * [] allocation.</span>
01044 <span class="comment">// Added debugging code.</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Feb 4 23:43:05 2004 for libdap++ by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>

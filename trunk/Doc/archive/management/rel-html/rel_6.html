<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- XML file produced from file: release-process.tex
     using Hyperlatex v 2.6 (c) Otfried Cheong
     on Emacs 21.3.1, Tue Jun 22 17:33:20 2004 -->
<head>
<title>OPeNDAP Software Release Process -- 6 Targets in the Makefiles</title>

<style type="text/css">
.maketitle { align : center }
div.abstract { margin-left: 20%; margin-right: 10%; }
h3.abstract  { align : center }
div.verse, div.quote, div.quotation {
  margin-left : 10%; 
  margin-right : 10%;
}
</style>

<link rel=stylesheet
        href="http://unidata.ucar.edu/packages/dods/css/dods-paper.css" type="text/css">
</head>
<body>
<table width="100%" cellpadding=0 cellspacing=2><tr>
    <td bgcolor="#99ccff"><a href="rel_7.html"><img border="0" alt="7 ChangeLog" src="http://unidata.ucar.edu/packages/dods/icons/next.gif"></a></td><td bgcolor="#99ccff"><a href="rel.html"><img border="0" alt="Top" src="http://unidata.ucar.edu/packages/dods/icons/up.gif"></a></td><td bgcolor="#99ccff"><a href="rel_5.html"><img border="0" alt="5 Version Numbers and CVS Tags" src="http://unidata.ucar.edu/packages/dods/icons/previous.gif"></a></td><td align="center" bgcolor="#99ccff" width="100%"><b>6 Targets in the Makefiles</b></td></tr></table>
<h1>6 Targets in the Makefiles</h1>
<p>Listed here are targets in the Makefiles that are used to help make releases.
<dl><dt><b><tt>Makefile</tt></b><dd> If the <CODE class="literal">Makefile.in</CODE> has changed, rebuild the
  <CODE class="literal">Makefile</CODE> either by running <CODE class="literal">config.status</CODE> or <CODE class="literal">configure</CODE>. In
  source code that has just been exported from CVS, you will need to run
  <CODE class="literal">configure</CODE> to build the <CODE class="literal">Makefile</CODE>.
<dt><b><tt>depend</tt></b><dd> (Re)build the dependencies. This target rebuilds the
  dependencies in the <CODE class="literal">Makefile.in</CODE>. You should not have to use this
  target with code that's been exported from CVS; if you do, then it is a
  sign that something is wrong with the <CODE class="literal">Makefile.in</CODE> that is in CVS.
  You'll need to go back to code that is in CVS, run make depend and then
  check in the resulting <CODE class="literal">Makefile.in</CODE>.
<dt><b><tt>check-version</tt></b><dd> Check that the version number in the
  <CODE class="literal">Makefile</CODE> matches the version number in the version.h file. If this
  returns an error, you need to go back to code in CVS, re-run
  <CODE class="literal">configure</CODE> and then export the code.
<dt><b><tt>update-version</tt></b><dd> Read the current version from the
  <CODE class="literal">version.h</CODE> file and append it to the CWD's name (i.e., <CODE class="literal">jg-dods</CODE>
  becomes <CODE class="literal">jg-dods-3.1.2</CODE>). Don't run this in the directories under CVS
  control (those that have the `CVS' subdirs in them). Only run this in an
  exported directory.
<dt><b><tt>all</tt></b><dd> Build all the main programs in the directory. 
<dt><b><tt>check</tt></b><dd> Run the tests for this this software. In some cases,
  you have to install the software (using the install target) before this
  does anything except return an obscure error. Bummer. This should have
  been run by the nightly build, so running it when making the source or
  binary tars is not completely necessary...<dt><b><tt>install</tt></b><dd> Copy the binaries from this directory into the
  <CODE class="literal">bin</CODE>, <CODE class="literal">lib</CODE>, <CODE class="literal">etc</CODE> and <CODE class="literal">include</CODE> directories.
<dt><b><tt>binary-tar</tt></b><dd> Build a tarball that contains the binaries built
  by `all' and installed by `install'. The binaries are tarred in the
  directories where they are installed, not where they are built.
<dt><b><tt>clean</tt></b><dd> Remove most generated files (i.e., executables, object
  files, core files, emacs backup files, ...).
<dt><b><tt>distclean</tt></b><dd> Remove all generated files except grammar files,
  the <CODE class="literal">Makefile</CODE> and <CODE class="literal">configure</CODE>.
<dt><b><tt>tar</tt></b><dd> Make a source code tarball. Run distclean before using
  this target to make the source tar balls. Note that in the top-level
  <CODE class="literal">Makefile</CODE> this is called <CODE class="literal">source-tar</CODE>.
</dl>
<p>If all goes well, the targets should be run in the following order after
running <CODE class="literal">configure</CODE>: <tt>check-version</tt> (should return OK),
<tt>update-version</tt> (should set the directory name so that the source tar
balls have the correct names), <tt>all</tt> (builds the code),
<tt>install</tt> (installs it), <tt>binary-tar</tt> (creates the binary
distributions for this platform), <tt>distclean</tt> (gets rid of the same
before making the source tar balls), <tt>tar</tt> (makes the source code tar
balls).
<hr /><address>James Gallagher &lt;jgallagher@gso.uri.edu&gt;, 
  2004/01/09, Revision: 1.18</address><br />
<table width="100%" cellpadding=0 cellspacing=2><tr>
    <td bgcolor="#99ccff"><a href="rel_7.html"><img border="0" alt="7 ChangeLog" src="http://unidata.ucar.edu/packages/dods/icons/next.gif"></a></td><td bgcolor="#99ccff"><a href="rel.html"><img border="0" alt="Top" src="http://unidata.ucar.edu/packages/dods/icons/up.gif"></a></td><td bgcolor="#99ccff"><a href="rel_5.html"><img border="0" alt="5 Version Numbers and CVS Tags" src="http://unidata.ucar.edu/packages/dods/icons/previous.gif"></a></td><td align="center" bgcolor="#99ccff" width="100%"><b>6 Targets in the Makefiles</b></td></tr></table></body></html>

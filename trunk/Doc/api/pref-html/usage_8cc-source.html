<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>libdap++: usage.cc Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>usage.cc</h1><a href="usage_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 <span class="comment">// -*- mode: c++; c-basic-offset:4 -*-</span>
00003 
00004 <span class="comment">// This file is part of libdap, A C++ implementation of the OPeNDAP Data</span>
00005 <span class="comment">// Access Protocol.</span>
00006 
00007 <span class="comment">// Copyright (c) 2002,2003 OPeNDAP, Inc.</span>
00008 <span class="comment">// Author: James Gallagher &lt;jgallagher@opendap.org&gt;</span>
00009 <span class="comment">//</span>
00010 <span class="comment">// This library is free software; you can redistribute it and/or</span>
00011 <span class="comment">// modify it under the terms of the GNU Lesser General Public</span>
00012 <span class="comment">// License as published by the Free Software Foundation; either</span>
00013 <span class="comment">// version 2.1 of the License, or (at your option) any later version.</span>
00014 <span class="comment">// </span>
00015 <span class="comment">// This library is distributed in the hope that it will be useful,</span>
00016 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00017 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
00018 <span class="comment">// Lesser General Public License for more details.</span>
00019 <span class="comment">// </span>
00020 <span class="comment">// You should have received a copy of the GNU Lesser General Public</span>
00021 <span class="comment">// License along with this library; if not, write to the Free Software</span>
00022 <span class="comment">// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00023 <span class="comment">//</span>
00024 <span class="comment">// You can contact OPeNDAP, Inc. at PO Box 112, Saunderstown, RI. 02874-0112.</span>
00025  
00026 <span class="comment">// (c) COPYRIGHT URI/MIT 1996, 1999</span>
00027 <span class="comment">// Please read the full copyright statement in the file COPYRIGHT_URI.</span>
00028 <span class="comment">//</span>
00029 <span class="comment">// Authors:</span>
00030 <span class="comment">//      jhrg,jimg       James Gallagher &lt;jgallagher@gso.uri.edu&gt;</span>
00031 
00032 <span class="comment">// The Usage server. Arguments: three arguments; filter options, the dataset</span>
00033 <span class="comment">// name and the pathname and `api prefix' of the data server. Returns a HTML</span>
00034 <span class="comment">// document that describes what information this dataset contains, special</span>
00035 <span class="comment">// characteristics of the server users might want to know and any special</span>
00036 <span class="comment">// information that the dataset providers want to make available. jhrg</span>
00037 <span class="comment">// 12/9/96</span>
00038 
00039 <span class="preprocessor">#include "<a class="code" href="config__dap_8h.html">config_dap.h</a>"</span>
00040 
00041 <span class="keyword">static</span> <span class="keywordtype">char</span> rcsid[] <a class="code" href="config__dap_8h.html#a49">not_used</a> = {<span class="stringliteral">"$Id$"</span>};
00042 
00043 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00044 
00045 <span class="preprocessor">#ifdef HAVE_PTHREAD_H</span>
00046 <span class="preprocessor"></span><span class="preprocessor">#include &lt;pthread.h&gt;</span>
00047 <span class="preprocessor">#endif</span>
00048 <span class="preprocessor"></span>
00049 <span class="preprocessor">#include &lt;iostream&gt;</span>
00050 <span class="preprocessor">#include &lt;fstream&gt;</span>
00051 <span class="preprocessor">#include &lt;string&gt;</span>
00052 <span class="preprocessor">#include &lt;sstream&gt;</span>
00053 
00054 <span class="preprocessor">#include "Regex.h"</span>
00055 
00056 <span class="preprocessor">#include "<a class="code" href="cgi__util_8h.html">cgi_util.h</a>"</span>
00057 <span class="preprocessor">#include "<a class="code" href="util_8h.html">util.h</a>"</span>
00058 <span class="preprocessor">#include "<a class="code" href="DAS_8h.html">DAS.h</a>"</span>
00059 
00060 <span class="preprocessor">#include "<a class="code" href="debug_8h.html">debug.h</a>"</span>
00061 
00062 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00063 
00064 <span class="keyword">static</span> <span class="keywordtype">void</span>
00065 <a class="code" href="error-test_8cc.html#a6">usage</a>(<span class="keywordtype">char</span> *argv[])
00066 {
00067     cerr &lt;&lt; argv[0] &lt;&lt; <span class="stringliteral">" &lt;options&gt; &lt;filename&gt; &lt;CGI prefix&gt;"</span> &lt;&lt; endl
00068          &lt;&lt; <span class="stringliteral">"Takes three required arguments; command options to be"</span> &lt;&lt; endl
00069      &lt;&lt; <span class="stringliteral">"passed to the filter programs, the dataset filename and"</span> &lt;&lt; endl
00070      &lt;&lt; <span class="stringliteral">"the directory and api prefix for the filter program."</span> &lt;&lt; endl; 
00071 }
00072 
00073 <span class="comment">// This code could use a real `kill-file' some day - about the same time that</span>
00074 <span class="comment">// the rest of the server gets a `rc' file... For the present just see if a</span>
00075 <span class="comment">// small collection of regexs match the name.</span>
00076 
00077 <span class="comment">// The pthread code here is used to ensure that the static objects dim and</span>
00078 <span class="comment">// global (in name_in_kill_file() and name_is_global()) are initialized only</span>
00079 <span class="comment">// once. If the pthread package is not present when libdap++ is built, this</span>
00080 <span class="comment">// code is *not* MT-Safe.</span>
00081 
00082 <span class="keyword">static</span> Regex *dim_ptr;
00083 <span class="preprocessor">#if HAVE_PTHREAD_H</span>
00084 <span class="preprocessor"></span><span class="keyword">static</span> pthread_once_t dim_once_control = PTHREAD_ONCE_INIT;
00085 <span class="preprocessor">#endif</span>
00086 <span class="preprocessor"></span>
00087 <span class="keyword">static</span> <span class="keywordtype">void</span>
00088 init_dim_regex()
00089 {
00090     <span class="comment">// MT-Safe if called via pthread_once or similar</span>
00091     <span class="keyword">static</span> Regex dim(<span class="stringliteral">".*_dim_[0-9]*"</span>, 1); <span class="comment">// HDF `dim' attributes.</span>
00092     dim_ptr = &amp;dim;
00093 }
00094 
00095 <span class="keyword">static</span> <span class="keywordtype">bool</span>
00096 name_in_kill_file(<span class="keyword">const</span> string &amp;name)
00097 {
00098 <span class="preprocessor">#if HAVE_PTHREAD_H</span>
00099 <span class="preprocessor"></span>    pthread_once(&amp;dim_once_control, init_dim_regex);
00100 <span class="preprocessor">#else</span>
00101 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (!dim_ptr)
00102     init_dim_regex();
00103 <span class="preprocessor">#endif</span>
00104 <span class="preprocessor"></span>
00105     <span class="keywordflow">return</span> dim_ptr-&gt;match(name.c_str(), name.length()) != -1;
00106 }
00107 
00108 <span class="keyword">static</span> Regex *global_ptr;
00109 <span class="preprocessor">#if HAVE_PTHREAD_H</span>
00110 <span class="preprocessor"></span><span class="keyword">static</span> pthread_once_t global_once_control = PTHREAD_ONCE_INIT;
00111 <span class="preprocessor">#endif</span>
00112 <span class="preprocessor"></span>
00113 <span class="keyword">static</span> <span class="keywordtype">void</span>
00114 init_global_regex()
00115 {
00116     <span class="comment">// MT-Safe if called via pthread_once or similar</span>
00117     <span class="keyword">static</span> Regex global(<span class="stringliteral">"\\(.*global.*\\)\\|\\(.*dods.*\\)"</span>, 1);
00118     global_ptr = &amp;global;
00119 }
00120 
00121 <span class="keyword">static</span> <span class="keywordtype">bool</span>
00122 name_is_global(string &amp;name)
00123 {
00124 <span class="preprocessor">#if HAVE_PTHREAD_H</span>
00125 <span class="preprocessor"></span>    pthread_once(&amp;global_once_control, init_global_regex);
00126 <span class="preprocessor">#else</span>
00127 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (!global_ptr)
00128     init_global_regex();
00129 <span class="preprocessor">#endif</span>
00130 <span class="preprocessor"></span>
00131     <a class="code" href="util_8cc.html#a12">downcase</a>(name);
00132     <span class="keywordflow">return</span> global_ptr-&gt;match(name.c_str(), name.length()) != -1;
00133 }
00134 
00135 <span class="comment">// write_global_attributes and write_attributes are almost the same except</span>
00136 <span class="comment">// that the global attributes use fancier formatting. The formatting could be</span>
00137 <span class="comment">// passed in as params, but that would make the code much harder to</span>
00138 <span class="comment">// understand. So, I'm keeping this as two separate functions even though</span>
00139 <span class="comment">// there's some duplication... 3/27/2002 jhrg</span>
00140 <span class="keyword">static</span> <span class="keywordtype">void</span>
00141 write_global_attributes(ostringstream &amp;oss, <a class="code" href="classAttrTable.html">AttrTable</a> *attr, 
00142             <span class="keyword">const</span> string prefix = <span class="stringliteral">""</span>)
00143 {
00144     <span class="keywordflow">if</span> (attr) {
00145     <a class="code" href="classAttrTable.html#DASw1">AttrTable::Attr_iter</a> a;
00146     <span class="keywordflow">for</span> (a = attr-&gt;<a class="code" href="classAttrTable.html#DASz9_8">attr_begin</a>(); a != attr-&gt;<a class="code" href="classAttrTable.html#DASz9_9">attr_end</a>(); a++) {
00147         <span class="keywordflow">if</span> (attr-&gt;<a class="code" href="classAttrTable.html#DASz7_11">is_container</a>(a))
00148         write_global_attributes(oss, attr-&gt;<a class="code" href="classAttrTable.html#DASz5_0">get_attr_table</a>(a), 
00149                     (prefix == <span class="stringliteral">""</span>) ? attr-&gt;<a class="code" href="classAttrTable.html#DASa13">get_name</a>(a) 
00150                     : prefix + string(".") + attr-&gt;get_name(a));
00151         <span class="keywordflow">else</span> {
00152         oss &lt;&lt; <span class="stringliteral">"\n&lt;tr&gt;&lt;td align=right valign=top&gt;&lt;b&gt;"</span>; 
00153         <span class="keywordflow">if</span> (prefix != <span class="stringliteral">""</span>)
00154             oss &lt;&lt; prefix &lt;&lt; <span class="stringliteral">"."</span> &lt;&lt; attr-&gt;<a class="code" href="classAttrTable.html#DASa13">get_name</a>(a);
00155         <span class="keywordflow">else</span>
00156             oss &lt;&lt; attr-&gt;<a class="code" href="classAttrTable.html#DASa13">get_name</a>(a);
00157         oss &lt;&lt; <span class="stringliteral">"&lt;/b&gt;:&lt;/td&gt;\n"</span>;
00158 
00159         <span class="keywordtype">int</span> num_attr = attr-&gt;<a class="code" href="classAttrTable.html#DASz5_6">get_attr_num</a>(a) - 1;
00160         oss &lt;&lt; <span class="stringliteral">"&lt;td align=left&gt;"</span>;
00161         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_attr; ++i)
00162             oss &lt;&lt; attr-&gt;<a class="code" href="classAttrTable.html#DASz7_5">get_attr</a>(a, i) &lt;&lt; <span class="stringliteral">", "</span>;
00163         oss &lt;&lt; attr-&gt;<a class="code" href="classAttrTable.html#DASz7_5">get_attr</a>(a, num_attr) &lt;&lt; <span class="stringliteral">"&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;\n"</span>;
00164         }
00165     }
00166     }
00167 }
00168 
00169 <span class="keyword">static</span> <span class="keywordtype">void</span>
00170 write_attributes(ostringstream &amp;oss, <a class="code" href="classAttrTable.html">AttrTable</a> *attr, <span class="keyword">const</span> string prefix = <span class="stringliteral">""</span>)
00171 {
00172     <span class="keywordflow">if</span> (attr) {
00173     <a class="code" href="classAttrTable.html#DASw1">AttrTable::Attr_iter</a> a;
00174     <span class="keywordflow">for</span> (a = attr-&gt;<a class="code" href="classAttrTable.html#DASz9_8">attr_begin</a>(); a != attr-&gt;<a class="code" href="classAttrTable.html#DASz9_9">attr_end</a>(); a++) {
00175         <span class="keywordflow">if</span> (attr-&gt;<a class="code" href="classAttrTable.html#DASz7_11">is_container</a>(a))
00176         write_attributes(oss, attr-&gt;<a class="code" href="classAttrTable.html#DASz5_0">get_attr_table</a>(a), 
00177                  (prefix == <span class="stringliteral">""</span>) ? attr-&gt;<a class="code" href="classAttrTable.html#DASa13">get_name</a>(a) 
00178                  : prefix + string(".") + attr-&gt;get_name(a));
00179         <span class="keywordflow">else</span> {
00180         <span class="keywordflow">if</span> (prefix != <span class="stringliteral">""</span>)
00181             oss &lt;&lt; prefix &lt;&lt; <span class="stringliteral">"."</span> &lt;&lt; attr-&gt;<a class="code" href="classAttrTable.html#DASa13">get_name</a>(a);
00182         <span class="keywordflow">else</span>
00183             oss &lt;&lt; attr-&gt;<a class="code" href="classAttrTable.html#DASa13">get_name</a>(a);
00184         oss &lt;&lt; <span class="stringliteral">": "</span>;
00185 
00186         <span class="keywordtype">int</span> num_attr = attr-&gt;<a class="code" href="classAttrTable.html#DASz5_6">get_attr_num</a>(a) - 1 ;
00187         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_attr; ++i)
00188             oss &lt;&lt; attr-&gt;<a class="code" href="classAttrTable.html#DASz7_5">get_attr</a>(a, i) &lt;&lt; <span class="stringliteral">", "</span>;
00189         oss &lt;&lt; attr-&gt;<a class="code" href="classAttrTable.html#DASz7_5">get_attr</a>(a, num_attr) &lt;&lt; <span class="stringliteral">"&lt;br&gt;\n"</span>;
00190         }
00191     }
00192     }
00193 }
00194 
00207 string
<a name="l00208"></a><a class="code" href="usage_8cc.html#a12">00208</a> <a class="code" href="usage_8cc.html#a12">build_global_attributes</a>(<a class="code" href="classDAS.html">DAS</a> &amp;das, <a class="code" href="classDDS.html">DDS</a> &amp;)
00209 {
00210     <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;
00211     ostringstream ga;
00212 
00213     ga &lt;&lt; <span class="stringliteral">"&lt;h3&gt;Dataset Information&lt;/h3&gt;\n&lt;center&gt;\n&lt;table&gt;\n"</span>;
00214 
00215     <span class="keywordflow">for</span> (<a class="code" href="classAttrTable.html#DASw1">AttrTable::Attr_iter</a> p = das.<a class="code" href="classDAS.html#DASa6">var_begin</a>(); p != das.<a class="code" href="classDAS.html#DASa7">var_end</a>(); p++) {
00216     string name = das.<a class="code" href="classDAS.html#DASa5">get_name</a>(p);
00217 
00218     <span class="comment">// I used `name_in_dds' originally, but changed to `name_is_global'</span>
00219     <span class="comment">// because aliases between groups of attributes can result in</span>
00220     <span class="comment">// attribute group names which are not in the DDS and are *not*</span>
00221     <span class="comment">// global attributes. jhrg. 5/22/97</span>
00222     <span class="keywordflow">if</span> (!name_in_kill_file(name) &amp;&amp; name_is_global(name)) {
00223         <a class="code" href="classAttrTable.html">AttrTable</a> *attr = das.<a class="code" href="classDAS.html#DASz16_0">get_table</a>(p);
00224 <span class="preprocessor">#if 0</span>
00225 <span class="preprocessor"></span>        found = attr-&gt;<a class="code" href="classAttrTable.html#DASz7_8">first_attr</a>() != (Pix)0; <span class="comment">// we have global attrs</span>
00226 <span class="preprocessor">#endif</span>
00227 <span class="preprocessor"></span>        <span class="comment">// The above line is probably broken. But that doesn't really</span>
00228         <span class="comment">// matter  in this case because I think we should have the</span>
00229         <span class="comment">// section even if it is empty (given that we've found a global</span>
00230         <span class="comment">// name).</span>
00231         found = <span class="keyword">true</span>;
00232         write_global_attributes(ga, attr, <span class="stringliteral">""</span>);
00233     }
00234     }
00235 
00236     ga &lt;&lt; <span class="stringliteral">"&lt;/table&gt;\n&lt;/center&gt;&lt;p&gt;\n"</span>;
00237 
00238     <span class="keywordflow">if</span> (found)
00239     <span class="keywordflow">return</span> ga.str();
00240 
00241     <span class="keywordflow">return</span> <span class="stringliteral">""</span>;
00242 }
00243 
00244 <span class="keyword">static</span> string
00245 fancy_typename(<a class="code" href="classBaseType.html">BaseType</a> *v)
00246 {
00247     string fancy;
00248     <span class="keywordflow">switch</span> (v-&gt;<a class="code" href="classBaseType.html#Vectora29">type</a>()) {
00249       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a6">dods_byte_c</a>:
00250     <span class="keywordflow">return</span> <span class="stringliteral">"Byte"</span>;
00251       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a7">dods_int16_c</a>:
00252     <span class="keywordflow">return</span> <span class="stringliteral">"16 bit Integer"</span>;
00253       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a8">dods_uint16_c</a>:
00254     <span class="keywordflow">return</span> <span class="stringliteral">"16 bit Unsigned integer"</span>;
00255       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a9">dods_int32_c</a>:
00256     <span class="keywordflow">return</span> <span class="stringliteral">"32 bit Integer"</span>;
00257       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a10">dods_uint32_c</a>:
00258     <span class="keywordflow">return</span> <span class="stringliteral">"32 bit Unsigned integer"</span>;
00259       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a11">dods_float32_c</a>:
00260     <span class="keywordflow">return</span> <span class="stringliteral">"32 bit Real"</span>;
00261       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a12">dods_float64_c</a>:
00262     <span class="keywordflow">return</span> <span class="stringliteral">"64 bit Real"</span>;
00263       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a13">dods_str_c</a>:
00264     <span class="keywordflow">return</span> <span class="stringliteral">"String"</span>;
00265       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a14">dods_url_c</a>:
00266     <span class="keywordflow">return</span> <span class="stringliteral">"URL"</span>;
00267       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a15">dods_array_c</a>: {
00268       ostringstream type;
00269       <a class="code" href="classArray.html">Array</a> *a = (<a class="code" href="classArray.html">Array</a> *)v;
00270       type &lt;&lt; <span class="stringliteral">"Array of "</span> &lt;&lt; fancy_typename(a-&gt;<a class="code" href="classVector.html#Vectora17">var</a>()) &lt;&lt;<span class="stringliteral">"s "</span>;
00271       <span class="keywordflow">for</span> (<a class="code" href="classArray.html#Arrayw1">Array::Dim_iter</a> p = a-&gt;<a class="code" href="classArray.html#Arraya13">dim_begin</a>(); p != a-&gt;<a class="code" href="classArray.html#Arraya14">dim_end</a>(); p++)
00272           {
00273           type &lt;&lt; <span class="stringliteral">"["</span> &lt;&lt; a-&gt;<a class="code" href="classArray.html#Arraya23">dimension_name</a>(p) &lt;&lt; <span class="stringliteral">" = 0.."</span> 
00274                &lt;&lt; a-&gt;<a class="code" href="classArray.html#Arraya15">dimension_size</a>(p, <span class="keyword">false</span>)-1 &lt;&lt; <span class="stringliteral">"]"</span>;
00275           }
00276       <span class="keywordflow">return</span> type.str();
00277 
00278       }
00279       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a16">dods_list_c</a>: {
00280       ostringstream type;
00281       <a class="code" href="classList.html">List</a> *l = (<a class="code" href="classList.html">List</a> *)v;
00282       type &lt;&lt; <span class="stringliteral">"List of "</span> &lt;&lt; fancy_typename(l-&gt;<a class="code" href="classVector.html#Vectora17">var</a>()) &lt;&lt;<span class="stringliteral">"s "</span>;
00283       <span class="keywordflow">return</span> type.str();
00284       }
00285       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a17">dods_structure_c</a>:
00286     <span class="keywordflow">return</span> <span class="stringliteral">"Structure"</span>;
00287       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a18">dods_sequence_c</a>:
00288     <span class="keywordflow">return</span> <span class="stringliteral">"Sequence"</span>;
00289       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a19">dods_grid_c</a>:
00290     <span class="keywordflow">return</span> <span class="stringliteral">"Grid"</span>;
00291       <span class="keywordflow">default</span>:
00292     <span class="keywordflow">return</span> <span class="stringliteral">"Unknown"</span>;
00293     }
00294 }
00295 
00296 <span class="keyword">static</span> <span class="keywordtype">void</span>
00297 write_variable(<a class="code" href="classBaseType.html">BaseType</a> *btp, <a class="code" href="classDAS.html">DAS</a> &amp;das, ostringstream &amp;vs)
00298 {
00299     vs &lt;&lt; <span class="stringliteral">"&lt;td align=right valign=top&gt;&lt;b&gt;"</span> &lt;&lt; btp-&gt;<a class="code" href="classBaseType.html#Vectora27">name</a>() 
00300        &lt;&lt; <span class="stringliteral">"&lt;/b&gt;:&lt;/td&gt;\n"</span>
00301        &lt;&lt; <span class="stringliteral">"&lt;td align=left valign=top&gt;"</span> &lt;&lt; fancy_typename(btp)
00302        &lt;&lt; <span class="stringliteral">"&lt;br&gt;"</span>;
00303 
00304     <a class="code" href="classAttrTable.html">AttrTable</a> *attr = das.<a class="code" href="classDAS.html#DASz16_0">get_table</a>(btp-&gt;<a class="code" href="classBaseType.html#Vectora27">name</a>());
00305         
00306     write_attributes(vs, attr, <span class="stringliteral">""</span>);
00307 
00308     <span class="keywordflow">switch</span> (btp-&gt;<a class="code" href="classBaseType.html#Vectora29">type</a>()) {
00309       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a6">dods_byte_c</a>:
00310       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a7">dods_int16_c</a>:
00311       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a8">dods_uint16_c</a>:
00312       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a9">dods_int32_c</a>:
00313       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a10">dods_uint32_c</a>:
00314       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a11">dods_float32_c</a>:
00315       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a12">dods_float64_c</a>:
00316       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a13">dods_str_c</a>:
00317       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a14">dods_url_c</a>:
00318       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a15">dods_array_c</a>:
00319       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a16">dods_list_c</a>:
00320     vs &lt;&lt; <span class="stringliteral">"&lt;/td&gt;\n"</span>;
00321     <span class="keywordflow">break</span>;
00322 
00323       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a17">dods_structure_c</a>: {
00324       vs &lt;&lt; <span class="stringliteral">"&lt;table&gt;\n"</span>;
00325       <a class="code" href="classStructure.html">Structure</a> *sp = dynamic_cast&lt;Structure *&gt;(btp);
00326       <a class="code" href="classStructure.html#Structurew1">Structure::Vars_iter</a> p;
00327       <span class="keywordflow">for</span> (p = sp-&gt;<a class="code" href="classStructure.html#Structurea21">var_begin</a>(); p != sp-&gt;<a class="code" href="classStructure.html#Structurea22">var_end</a>(); p++) {
00328           vs &lt;&lt; <span class="stringliteral">"&lt;tr&gt;"</span>;
00329           write_variable((*p), das, vs);
00330           vs &lt;&lt; <span class="stringliteral">"&lt;/tr&gt;"</span>;
00331       }
00332       vs &lt;&lt; <span class="stringliteral">"&lt;/table&gt;\n"</span>;
00333       <span class="keywordflow">break</span>;
00334       }
00335 
00336       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a18">dods_sequence_c</a>: {
00337       vs &lt;&lt; <span class="stringliteral">"&lt;table&gt;\n"</span>;
00338       <a class="code" href="classSequence.html">Sequence</a> *sp = dynamic_cast&lt;Sequence *&gt;(btp);
00339       <a class="code" href="classSequence.html#Sequencew1">Sequence::Vars_iter</a> p;
00340       <span class="keywordflow">for</span> (p = sp-&gt;<a class="code" href="classSequence.html#Sequencea29">var_begin</a>(); p != sp-&gt;<a class="code" href="classSequence.html#Sequencea30">var_end</a>(); p++) {
00341           vs &lt;&lt; <span class="stringliteral">"&lt;tr&gt;"</span>;
00342           write_variable((*p), das, vs);
00343           vs &lt;&lt; <span class="stringliteral">"&lt;/tr&gt;"</span>;
00344       }
00345       vs &lt;&lt; <span class="stringliteral">"&lt;/table&gt;\n"</span>;
00346       <span class="keywordflow">break</span>;
00347       }
00348 
00349       <span class="keywordflow">case</span> <a class="code" href="BaseType_8h.html#a21a19">dods_grid_c</a>: {
00350       vs &lt;&lt; <span class="stringliteral">"&lt;table&gt;\n"</span>;
00351       <a class="code" href="classGrid.html">Grid</a> *gp = dynamic_cast&lt;Grid *&gt;(btp);
00352       write_variable(gp-&gt;<a class="code" href="classGrid.html#Grida12">array_var</a>(), das, vs);
00353       <a class="code" href="classGrid.html#Gridw1">Grid::Map_iter</a> p;
00354       <span class="keywordflow">for</span> (p = gp-&gt;<a class="code" href="classGrid.html#Grida28">map_begin</a>(); p != gp-&gt;<a class="code" href="classGrid.html#Grida29">map_end</a>(); p++) {
00355           vs &lt;&lt; <span class="stringliteral">"&lt;tr&gt;"</span>;
00356           write_variable((*p), das, vs);
00357           vs &lt;&lt; <span class="stringliteral">"&lt;/tr&gt;"</span>;
00358       }
00359       vs &lt;&lt; <span class="stringliteral">"&lt;/table&gt;\n"</span>;
00360       <span class="keywordflow">break</span>;
00361       }
00362 
00363       <span class="keywordflow">default</span>:
00364     <span class="keywordflow">throw</span> <a class="code" href="classInternalErr.html">InternalErr</a>(__FILE__, __LINE__, <span class="stringliteral">"Unknown type"</span>);
00365     }
00366 }
00367 
00376 string
<a name="l00377"></a><a class="code" href="usage_8cc.html#a15">00377</a> <a class="code" href="usage_8cc.html#a15">build_variable_summaries</a>(<a class="code" href="classDAS.html">DAS</a> &amp;das, <a class="code" href="classDDS.html">DDS</a> &amp;dds)
00378 {
00379     ostringstream vs;
00380     vs &lt;&lt; <span class="stringliteral">"&lt;h3&gt;Variables in this Dataset&lt;/h3&gt;\n&lt;center&gt;\n&lt;table&gt;\n"</span>;
00381     <span class="comment">//    vs &lt;&lt; "&lt;tr&gt;&lt;th&gt;Variable&lt;/th&gt;&lt;th&gt;Information&lt;/th&gt;&lt;/tr&gt;\n";</span>
00382 
00383     <span class="keywordflow">for</span> (<a class="code" href="classDDS.html#DDSw1">DDS::Vars_iter</a> p = dds.<a class="code" href="classDDS.html#DDSa13">var_begin</a>(); p != dds.<a class="code" href="classDDS.html#DDSa14">var_end</a>(); p++) {
00384     vs &lt;&lt; <span class="stringliteral">"&lt;tr&gt;"</span>;
00385     write_variable((*p), das, vs);
00386     vs &lt;&lt; <span class="stringliteral">"&lt;/tr&gt;"</span>;
00387     }
00388 
00389     vs &lt;&lt; <span class="stringliteral">"&lt;/table&gt;\n&lt;/center&gt;&lt;p&gt;\n"</span>;
00390 
00391     <span class="keywordflow">return</span> vs.str();
00392 }
00393 
00394 <span class="keyword">static</span> <span class="keywordtype">void</span>
00395 html_header()
00396 {
00397     fprintf( stdout, <span class="stringliteral">"HTTP/1.0 200 OK\n"</span> ) ;
00398     fprintf( stdout, <span class="stringliteral">"XDODS-Server: %s\n"</span>, DVR ) ;
00399     fprintf( stdout, <span class="stringliteral">"Content-type: text/html\n"</span> ) ;
00400     fprintf( stdout, <span class="stringliteral">"Content-Description: dods_description\n"</span> ) ;
00401     fprintf( stdout, <span class="stringliteral">"\n"</span> ) ;   <span class="comment">// MIME header ends with a blank line</span>
00402 }
00403 
00404 <span class="preprocessor">#ifdef WIN32</span>
00405 <span class="preprocessor"></span><span class="keywordtype">void</span>
00406 <span class="preprocessor">#else</span>
00407 <span class="preprocessor"></span><span class="keywordtype">int</span>
00408 <span class="preprocessor">#endif </span>
<a name="l00409"></a><a class="code" href="usage_8cc.html#a17">00409</a> <span class="preprocessor"></span><a class="code" href="usage_8cc.html#a17">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])
00410 {
00411     <span class="keywordflow">if</span> (argc != 4) {
00412     <a class="code" href="error-test_8cc.html#a6">usage</a>(argv);
00413     exit(1);
00414     }
00415 
00416     string <a class="code" href="expr-test_8cc.html#a8">options</a> = argv[1];
00417 
00418     string name = argv[2];
00419     string doc;
00420 
00421     <span class="keywordflow">if</span> (<a class="code" href="cgi__util_8cc.html#a24">found_override</a>(name, doc)) {
00422     html_header();
00423     fprintf( stdout, <span class="stringliteral">"%s"</span>, doc.c_str() ) ;
00424     exit(0);
00425     }
00426 
00427     <span class="comment">// The site is not overriding the DAS/DDS generated information, so read</span>
00428     <span class="comment">// the DAS, DDS and user supplied documents. </span>
00429 
00430     string cgi = argv[3];
00431 
00432     <a class="code" href="classDAS.html">DAS</a> das;
00433     string command = cgi + <span class="stringliteral">"_das "</span> + <a class="code" href="expr-test_8cc.html#a8">options</a> + <span class="stringliteral">" '"</span> + name + <span class="stringliteral">"'"</span>;
00434     <a class="code" href="debug_8h.html#a1">DBG</a>(cerr &lt;&lt; <span class="stringliteral">"DAS Command: "</span> &lt;&lt; command &lt;&lt; endl);
00435 
00436     <span class="keywordflow">try</span> {
00437 <span class="preprocessor">#ifndef WIN32</span>
00438 <span class="preprocessor"></span>    <span class="comment">//  Under win32, this has been temporarily removed to get it to</span>
00439     <span class="comment">//  compile. This code is not relevant for the client side for win32</span>
00440     <span class="comment">//  native port. Once one or more of the Dods servers have been</span>
00441     <span class="comment">//  ported, this will need patched similiar to the popen() fixes for</span>
00442     <span class="comment">//  ML loaddods.</span>
00443     FILE *in = popen(command.c_str(), <span class="stringliteral">"r"</span>);
00444     <span class="keywordflow">if</span> (in &amp;&amp; <a class="code" href="cgi__util_8cc.html#a25">remove_mime_header</a>(in)) {
00445         das.<a class="code" href="classDAS.html#DASz19_0">parse</a>(in);
00446         pclose(in);
00447     }
00448 <span class="preprocessor">#endif</span>
00449 <span class="preprocessor"></span>
00450     <a class="code" href="classDDS.html">DDS</a> dds;
00451     command = cgi + <span class="stringliteral">"_dds '"</span> + name + <span class="stringliteral">"'"</span>;
00452     <a class="code" href="debug_8h.html#a1">DBG</a>(cerr &lt;&lt; <span class="stringliteral">"DDS Command: "</span> &lt;&lt; command &lt;&lt; endl);
00453 
00454 <span class="preprocessor">#ifndef WIN32</span>
00455 <span class="preprocessor"></span>    <span class="comment">//  Under win32, this has been temporarily removed to get it to</span>
00456     <span class="comment">//  compile. This code is not relevant for the client side for win32</span>
00457     <span class="comment">//  native port. Once one or more of the Dods servers have been</span>
00458     <span class="comment">//  ported, this will need patched similiar to the popen() fixes for</span>
00459     <span class="comment">//  ML loaddods.</span>
00460     in = popen(command.c_str(), <span class="stringliteral">"r"</span>);
00461     <span class="keywordflow">if</span> (in &amp;&amp; <a class="code" href="cgi__util_8cc.html#a25">remove_mime_header</a>(in)) {
00462         dds.<a class="code" href="classDDS.html#DDSa40">parse</a>(in);
00463         pclose(in);
00464     }
00465 <span class="preprocessor">#endif</span>
00466 <span class="preprocessor"></span>
00467     <span class="comment">// Build the HTML* documents.</span>
00468 
00469     string user_html = <a class="code" href="cgi__util_8cc.html#a26">get_user_supplied_docs</a>(name, cgi);
00470 
00471     string global_attrs = <a class="code" href="usage_8cc.html#a12">build_global_attributes</a>(das, dds);
00472 
00473     string variable_sum = <a class="code" href="usage_8cc.html#a15">build_variable_summaries</a>(das, dds);
00474 
00475     <span class="comment">// Write out the HTML document.</span>
00476 
00477     html_header();
00478 
00479     <span class="keywordflow">if</span> (global_attrs.length()) {
00480 &lt;&lt;&lt;&lt;&lt;&lt;&lt; <a class="code" href="error-test_8cc.html#a9">usage</a>.cc
00481         fprintf( stdout, <span class="stringliteral">"%s\n%s\n%s\n%s\n"</span>,
00482              <span class="stringliteral">"&lt;html&gt;&lt;head&gt;&lt;title&gt;Dataset Information&lt;/title&gt;&lt;/head&gt;"</span>,
00483              <span class="stringliteral">"&lt;body&gt;"</span>,
00484              global_attrs.c_str(),
00485              <span class="stringliteral">"&lt;hr&gt;"</span> ) ;
00486 =======
00487         fprintf(stdout, <span class="stringliteral">"%s\n%s\n%s\n%s\n"</span>,
00488             <span class="stringliteral">"&lt;html&gt;&lt;head&gt;&lt;title&gt;Dataset Information&lt;/title&gt;&lt;/head&gt;"</span>,
00489             <span class="stringliteral">"&lt;body&gt;"</span>,
00490             global_attrs.c_str(),
00491             <span class="stringliteral">"&lt;hr&gt;"</span> ) ;
00492 &gt;&gt;&gt;&gt;&gt;&gt;&gt; 1.23.2.2
00493     }
00494 
00495     fprintf( stdout, <span class="stringliteral">"%s\n"</span>, variable_sum.c_str() ) ;
00496 
00497     fprintf( stdout, <span class="stringliteral">"&lt;hr&gt;\n"</span> ) ;
00498 
00499     fprintf( stdout, <span class="stringliteral">"%s\n"</span>, user_html.c_str() ) ;
00500 
00501     fprintf( stdout, <span class="stringliteral">"&lt;/body&gt;\n&lt;/html&gt;\n"</span> ) ;
00502     }
00503     <span class="keywordflow">catch</span> (<a class="code" href="classError.html">Error</a> &amp;e) {
00504     string error_msg = e.get_error_message();
00505     fprintf( stdout, <span class="stringliteral">"&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\"\n"</span> ) ;
00506     fprintf( stdout, <span class="stringliteral">"\"http://www.w3.org/TR/REC-html40/loose.dtd\"&gt;\n"</span>) ;
00507     fprintf( stdout, <span class="stringliteral">"&lt;html&gt;&lt;head&gt;&lt;title&gt;DODS Error&lt;/title&gt;\n"</span> ) ;
00508     fprintf( stdout, <span class="stringliteral">"&lt;/head&gt;\n"</span> ) ;
00509     fprintf( stdout, <span class="stringliteral">"&lt;body&gt;\n"</span> ) ;
00510     fprintf( stdout, <span class="stringliteral">"&lt;h3&gt;Error building the DODS dataset usage repsonse&lt;/h3&gt;:\n"</span> ) ;
00511     fprintf( stdout, <span class="stringliteral">"%s"</span>, error_msg.c_str() ) ;
00512     fprintf( stdout, <span class="stringliteral">"&lt;hr&gt;\n"</span> ) ;
00513 
00514 <span class="preprocessor">#ifndef WIN32</span>
00515 <span class="preprocessor"></span>    <span class="keywordflow">return</span> 1;
00516 <span class="preprocessor">#endif</span>
00517 <span class="preprocessor"></span>    }
00518 
00519     <span class="comment">//  Needed for VC++</span>
00520 <span class="preprocessor">#ifdef WIN32</span>
00521 <span class="preprocessor"></span>    <span class="keywordflow">return</span>;
00522 <span class="preprocessor">#else</span>
00523 <span class="preprocessor"></span>    <span class="keywordflow">return</span> 0;
00524 <span class="preprocessor">#endif</span>
00525 <span class="preprocessor"></span>}
00526 
00527 <span class="comment">// $Log: usage_8cc-source.html,v $
00527 <span class="comment">// Revision 1.4  2004/02/05 06:51:21  jimg
00527 <span class="comment">// Added/update.
00527 <span class="comment">//</span>
00528 <span class="comment">// Revision 1.23.2.2  2004/01/30 18:07:24  jimg</span>
00529 <span class="comment">// Fixed bug 692. The switch from strstream to stringstream was partially</span>
00530 <span class="comment">// botched because we left ends operator calls in the code. This ended the</span>
00531 <span class="comment">// strings that were generated in some of the functions. When that was</span>
00532 <span class="comment">// concatenated with the stringstream is ended the string, typically after the</span>
00533 <span class="comment">// first variable or attribute was written. I removed the calls to ends.</span>
00534 <span class="comment">//</span>
00535 <span class="comment">// Revision 1.23.2.1  2003/11/25 18:18:43  jimg</span>
00536 <span class="comment">// I changed this so that it uses the stringstream classes and so that the</span>
00537 <span class="comment">// pathnames to the handlers maybe absolute (before the paths were prefixed by</span>
00538 <span class="comment">// "./" which made them always relative).</span>
00539 <span class="comment">//</span>
00540 <span class="comment">// Revision 1.23  2003/04/22 19:40:29  jimg</span>
00541 <span class="comment">// Merged with 3.3.1.</span>
00542 <span class="comment">//</span>
00543 <span class="comment">// Revision 1.22  2003/02/21 00:14:25  jimg</span>
00544 <span class="comment">// Repaired copyright.</span>
00545 <span class="comment">//</span>
00546 <span class="comment">// Revision 1.21.2.1  2003/02/21 00:10:08  jimg</span>
00547 <span class="comment">// Repaired copyright.</span>
00548 <span class="comment">//</span>
00549 <span class="comment">// Revision 1.21  2003/01/23 00:22:25  jimg</span>
00550 <span class="comment">// Updated the copyright notice; this implementation of the DAP is</span>
00551 <span class="comment">// copyrighted by OPeNDAP, Inc.</span>
00552 <span class="comment">//</span>
00553 <span class="comment">// Revision 1.20  2003/01/10 19:46:41  jimg</span>
00554 <span class="comment">// Merged with code tagged release-3-2-10 on the release-3-2 branch. In many</span>
00555 <span class="comment">// cases files were added on that branch (so they appear on the trunk for</span>
00556 <span class="comment">// the first time).</span>
00557 <span class="comment">//</span>
00558 <span class="comment">// Revision 1.16.2.16  2002/12/17 22:35:03  pwest</span>
00559 <span class="comment">// Added and updated methods using stdio. Deprecated methods using iostream.</span>
00560 <span class="comment">//</span>
00561 <span class="comment">// Revision 1.16.2.15  2002/11/18 03:18:35  rmorris</span>
00562 <span class="comment">// Minor porting change - VC++ required an explicit cast.</span>
00563 <span class="comment">//</span>
00564 <span class="comment">// Revision 1.16.2.14  2002/11/06 21:53:06  jimg</span>
00565 <span class="comment">// I changed the includes of Regex.h from &lt;Regex.h&gt; to "Regex.h". This means</span>
00566 <span class="comment">// make depend will include the header in the list of dependencies.</span>
00567 <span class="comment">//</span>
00568 <span class="comment">// Revision 1.16.2.13  2002/10/28 21:17:45  pwest</span>
00569 <span class="comment">// Converted all return values and method parameters to use non-const iterator.</span>
00570 <span class="comment">// Added operator== and operator!= methods to IteratorAdapter to handle Pix</span>
00571 <span class="comment">// problems.</span>
00572 <span class="comment">//</span>
00573 <span class="comment">// Revision 1.16.2.12  2002/09/05 22:52:55  pwest</span>
00574 <span class="comment">// Replaced the GNU data structures SLList and DLList with the STL container</span>
00575 <span class="comment">// class vector&lt;&gt;. To maintain use of Pix, changed the Pix.h header file to</span>
00576 <span class="comment">// redefine Pix to be an IteratorAdapter. Usage remains the same and all code</span>
00577 <span class="comment">// outside of the DAP should compile and link with no problems. Added methods</span>
00578 <span class="comment">// to the different classes where Pix is used to include methods to use STL</span>
00579 <span class="comment">// iterators. Replaced the use of Pix within the DAP to use iterators instead.</span>
00580 <span class="comment">// Updated comments for documentation, updated the test suites, and added some</span>
00581 <span class="comment">// unit tests. Updated the Makefile to remove GNU/SLList and GNU/DLList.</span>
00582 <span class="comment">//</span>
00583 <span class="comment">// Revision 1.16.2.11  2002/08/06 21:24:03  jimg</span>
00584 <span class="comment">// Made MT-Safe. Uses/requires pthreads; if configure cannot find pthreads,</span>
00585 <span class="comment">// then this code is *not* MT-Safe.</span>
00586 <span class="comment">//</span>
00587 <span class="comment">// Revision 1.16.2.10  2002/06/18 22:49:19  jimg</span>
00588 <span class="comment">// Added include of util.h and DAS.h. This was necessary because I removed the</span>
00589 <span class="comment">// an include of Connect.h in cgi_util.h (a bad idea anyway).</span>
00590 <span class="comment">//</span>
00591 <span class="comment">// Revision 1.16.2.9  2002/06/06 01:03:37  jimg</span>
00592 <span class="comment">// I modified main() so that it accepts (and expects) a third argument which</span>
00593 <span class="comment">// holds command line options which are to be passed to the filter programs.</span>
00594 <span class="comment">// This enables the dispatch code to pass along various options/arguments to the</span>
00595 <span class="comment">// filters. Most important of these is the -r &lt;cache_dir&gt; option because the</span>
00596 <span class="comment">// .info service for HDF files was often broken without it (see bug 453).</span>
00597 <span class="comment">//</span>
00598 <span class="comment">// Revision 1.19  2002/06/03 22:21:16  jimg</span>
00599 <span class="comment">// Merged with release-3-2-9</span>
00600 <span class="comment">//</span>
00601 <span class="comment">// Revision 1.16.2.8  2002/05/09 22:00:22  jimg</span>
00602 <span class="comment">// Fixed a bug in usage. If the CWD is not on the PATH (that is if `.' is not</span>
00603 <span class="comment">// onthe PATH) then usage was not finding the das and dds handlers. I changed</span>
00604 <span class="comment">// the code so that it now looks for ./&lt;api&gt;_das, ... where the `./' is new.</span>
00605 <span class="comment">// This fixes the bug.</span>
00606 <span class="comment">//</span>
00607 <span class="comment">// Revision 1.16.2.7  2002/03/27 17:37:49  jimg</span>
00608 <span class="comment">// Fixed printing of nested attributes. I replaced code that wrote out the</span>
00609 <span class="comment">// attributes so that nested attributes are printed using the dot notation</span>
00610 <span class="comment">// (before tehy were ignored). Look at write_attributes and</span>
00611 <span class="comment">// write_global_attributes. Bug 167.</span>
00612 <span class="comment">//</span>
00613 <span class="comment">// Revision 1.16.2.6  2002/02/04 19:05:20  jimg</span>
00614 <span class="comment">// Moved code duplicated in www_int into cgi_util.cc/h</span>
00615 <span class="comment">//</span>
00616 <span class="comment">// Revision 1.16.2.5  2002/01/23 03:17:32  jimg</span>
00617 <span class="comment">// Fixed bug 122. The group ancillary files (01base.hdf, 02base.hdf, ...) -&gt;</span>
00618 <span class="comment">// base.html) was broken. I added a new function to cgi_util.cc and used</span>
00619 <span class="comment">// that to fix this bug.</span>
00620 <span class="comment">//</span>
00621 <span class="comment">// Revision 1.16.2.4  2001/10/30 06:55:45  rmorris</span>
00622 <span class="comment">// Win32 porting changes.  Brings core win32 port up-to-date.</span>
00623 <span class="comment">//</span>
00624 <span class="comment">// Revision 1.18  2001/10/14 01:28:38  jimg</span>
00625 <span class="comment">// Merged with release-3-2-8.</span>
00626 <span class="comment">//</span>
00627 <span class="comment">// Revision 1.16.2.3  2001/10/09 01:18:16  jimg</span>
00628 <span class="comment">// Fixed bug 300. Usage now returns 1 when it encounters an error.</span>
00629 <span class="comment">//</span>
00630 <span class="comment">// Revision 1.16.2.2  2001/10/02 16:57:18  jimg</span>
00631 <span class="comment">// Fixed a documentation bug.</span>
00632 <span class="comment">//</span>
00633 <span class="comment">// Revision 1.17  2001/08/24 17:46:23  jimg</span>
00634 <span class="comment">// Resolved conflicts from the merge of release 3.2.6</span>
00635 <span class="comment">//</span>
00636 <span class="comment">// Revision 1.16.2.1  2001/08/17 23:59:42  jimg</span>
00637 <span class="comment">// Removed WIN32 compile guards from using statements.</span>
00638 <span class="comment">//</span>
00639 <span class="comment">// Revision 1.16  2000/10/18 17:24:59  jimg</span>
00640 <span class="comment">// Fixed an error in get_user_supplied_docs() which caused the data file to be</span>
00641 <span class="comment">// read instead of a &lt;data file&gt;.html file.</span>
00642 <span class="comment">//</span>
00643 <span class="comment">// Revision 1.15  2000/09/22 02:17:23  jimg</span>
00644 <span class="comment">// Rearranged source files so that the CVS logs appear at the end rather than</span>
00645 <span class="comment">// the start. Also made the ifdef guard symbols use the same naming scheme and</span>
00646 <span class="comment">// wrapped headers included in other headers in those guard symbols (to cut</span>
00647 <span class="comment">// down on extraneous file processing - See Lakos).</span>
00648 <span class="comment">//</span>
00649 <span class="comment">// Revision 1.14  2000/07/09 22:05:37  rmorris</span>
00650 <span class="comment">// Changes to increase portability, minimize ifdef's for win32 and account</span>
00651 <span class="comment">// for differences in the iostreams implementations.</span>
00652 <span class="comment">//</span>
00653 <span class="comment">// Revision 1.13  2000/06/07 18:07:01  jimg</span>
00654 <span class="comment">// Merged the pc port branch</span>
00655 <span class="comment">//</span>
00656 <span class="comment">// Revision 1.12.20.1  2000/06/02 18:39:04  rmorris</span>
00657 <span class="comment">// Mod's for port to win32.</span>
00658 <span class="comment">//</span>
00659 <span class="comment">// Revision 1.12  1999/05/04 19:47:24  jimg</span>
00660 <span class="comment">// Fixed copyright statements. Removed more of the GNU classes.</span>
00661 <span class="comment">//</span>
00662 <span class="comment">// Revision 1.11  1999/04/29 02:29:37  jimg</span>
00663 <span class="comment">// Merge of no-gnu branch</span>
00664 <span class="comment">//</span>
00665 <span class="comment">// Revision 1.10  1999/04/22 22:30:52  jimg</span>
00666 <span class="comment">// Uses dynamic_cast</span>
00667 <span class="comment">//</span>
00668 <span class="comment">// Revision 1.9  1999/04/09 17:17:30  jimg</span>
00669 <span class="comment">// Added support for the new datatypes.</span>
00670 <span class="comment">// Removed old code.</span>
00671 <span class="comment">// Changed header generated to include XDODS-Server.</span>
00672 <span class="comment">//</span>
00673 <span class="comment">// Revision 1.8  1999/03/24 23:27:49  jimg</span>
00674 <span class="comment">// Added support for the new Int16, UInt16 and Float32 types.</span>
00675 <span class="comment">//</span>
00676 <span class="comment">// Revision 1.7  1998/12/16 19:10:53  jimg</span>
00677 <span class="comment">// Added support for XDODS-Server MIME header. This fixes a problem where our</span>
00678 <span class="comment">// use of Server clashed with Java.</span>
00679 <span class="comment">//</span>
00680 <span class="comment">// Revision 1.6  1998/10/21 16:56:24  jimg</span>
00681 <span class="comment">// Removed name_in_dds using #if 0 ... #endif</span>
00682 <span class="comment">//</span>
00683 <span class="comment">// Revision 1.5.6.2  1999/02/05 09:32:37  jimg</span>
00684 <span class="comment">// Fixed __unused__ so that it not longer clashes with Red Hat 5.2 inlined</span>
00685 <span class="comment">// math code. </span>
00686 <span class="comment">//</span>
00687 <span class="comment">// Revision 1.5.6.1  1999/02/02 21:57:08  jimg</span>
00688 <span class="comment">// String to string version</span>
00689 <span class="comment">//</span>
00690 <span class="comment">// Revision 1.5  1998/02/09 20:11:43  jimg</span>
00691 <span class="comment">// Added/fixed doc++ comments.</span>
00692 <span class="comment">//</span>
00693 <span class="comment">// Revision 1.4  1998/02/05 20:14:07  jimg</span>
00694 <span class="comment">// DODS now compiles with gcc 2.8.x</span>
00695 <span class="comment">//</span>
00696 <span class="comment">// Revision 1.3  1997/05/22 22:32:04  jimg</span>
00697 <span class="comment">// Changed the way global attributes are ferreted out. Previously I had</span>
00698 <span class="comment">// assumed that any attribute group that was not also the name of a variable</span>
00699 <span class="comment">// was a group of `global' attributes. However, the new aliases change this.</span>
00700 <span class="comment">// In response I've changed the way usage looks for global attributes; it</span>
00701 <span class="comment">// looks for attribute groups which contain the strings `global' and/or</span>
00702 <span class="comment">// `dods'. Case is not important.</span>
00703 <span class="comment">//</span>
00704 <span class="comment">// Revision 1.2  1996/12/18 18:41:33  jimg</span>
00705 <span class="comment">// Added massive fixes for the processing of attributes to sort out the `global</span>
00706 <span class="comment">// attributes'. Also added changes to the overall layout of the resulting</span>
00707 <span class="comment">// document so that the hierarchy of the data is represented. Added some new</span>
00708 <span class="comment">// utility functions.</span>
00709 <span class="comment">//</span>
00710 <span class="comment">// Revision 1.1  1996/12/11 19:55:18  jimg</span>
00711 <span class="comment">// Created.</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Feb 4 23:43:05 2004 for libdap++ by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>

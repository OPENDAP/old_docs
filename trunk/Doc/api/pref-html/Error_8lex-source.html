<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Error.lex Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>Error.lex</h1><a href="Error_8lex.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 <span class="comment">/*</span>
00003 <span class="comment"> -*- mode: c++; c-basic-offset:4 -*-</span>
00004 <span class="comment"></span>
00005 <span class="comment"> This file is part of libdap, A C++ implementation of the OPeNDAP Data</span>
00006 <span class="comment"> Access Protocol.</span>
00007 <span class="comment"></span>
00008 <span class="comment"> Copyright (c) 2002,2003 OPeNDAP, Inc.</span>
00009 <span class="comment"> Author: James Gallagher &lt;jgallagher@opendap.org&gt;</span>
00010 <span class="comment"></span>
00011 <span class="comment"> This library is free software; you can redistribute it and/or</span>
00012 <span class="comment"> modify it under the terms of the GNU Lesser General Public</span>
00013 <span class="comment"> License as published by the Free Software Foundation; either</span>
00014 <span class="comment"> version 2.1 of the License, or (at your option) any later version.</span>
00015 <span class="comment"> </span>
00016 <span class="comment"> This library is distributed in the hope that it will be useful,</span>
00017 <span class="comment"> but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00018 <span class="comment"> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
00019 <span class="comment"> Lesser General Public License for more details.</span>
00020 <span class="comment"> </span>
00021 <span class="comment"> You should have received a copy of the GNU Lesser General Public</span>
00022 <span class="comment"> License along with this library; if not, write to the Free Software</span>
00023 <span class="comment"> Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00024 <span class="comment"></span>
00025 <span class="comment"> You can contact OPeNDAP, Inc. at PO Box 112, Saunderstown, RI. 02874-0112.</span>
00026 <span class="comment"></span>
00027 <span class="comment"> (c) COPYRIGHT URI/MIT 1994-1996,1998,1999</span>
00028 <span class="comment">*/</span> 
00029 
00030 <span class="comment">/*</span>
00031 <span class="comment">  Scanner for the Error object. It recognizes the five keywords in the</span>
00032 <span class="comment">  persistent representation of the Error object plus some syntactic sugar</span>
00033 <span class="comment">  (`=', `{', ...). The object's persistant representation uses a keyword =</span>
00034 <span class="comment">  value notation, where the values are quoted strings or integers.</span>
00035 <span class="comment"></span>
00036 <span class="comment">  The scanner is not reentrant, but can share name spaces with other</span>
00037 <span class="comment">  scanners. It must be processed by GNU's flex scanner generator.</span>
00038 <span class="comment">*/</span>
00039 
00040 %{
00041 
00042 <span class="preprocessor">#include "<a class="code" href="config__dap_8h.html">config_dap.h</a>"</span>
00043 
00044 <span class="keyword">static</span> <span class="keywordtype">char</span> rcsid[] not_used = {<span class="stringliteral">"$Id$"</span>};
00045 
00046 <span class="preprocessor">#include &lt;string.h&gt;</span>
00047 <span class="preprocessor">#include &lt;assert.h&gt;</span>
00048 
00049 <span class="preprocessor">#define YY_NO_UNPUT</span>
00050 <span class="preprocessor"></span><span class="preprocessor">#define YY_DECL int Errorlex YY_PROTO(( void ))</span>
00051 <span class="preprocessor"></span>
00052 <span class="preprocessor">#include "<a class="code" href="Error_8tab_8h.html">Error.tab.h</a>"</span>
00053 
00054 <span class="keywordtype">int</span> error_line_num = 1;
00055 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="das_8lex.html#a15">start_line</a>;      <span class="comment">/* used in quote and comment error handlers */</span>
00056 
00057 <span class="keywordtype">void</span> store_integer();
00058 <span class="keywordtype">void</span> store_string();
00059 
00060 %}
00061     
00062 %option noyywrap
00063 %x quote
00064 %x comment
00065 
00066 <a class="code" href="Error_8lex.html#a7">SCAN_INT</a>        [0-9]+
00067 
00068 <a class="code" href="Error_8lex.html#a2">SCAN_ERROR</a>      error|<a class="code" href="classError.html">Error</a>|ERROR
00069 <a class="code" href="Error_8lex.html#a3">SCAN_CODE</a>       code|Code|CODE
00070 <a class="code" href="Error_8lex.html#a4">SCAN_MSG</a>        message|Message|MESSAGE
00071 <a class="code" href="Error_8lex.html#a5">SCAN_PTYPE</a>      program_type|<a class="code" href="Error_8h.html#a86">ProgramType</a>|PROGRAM_TYPE|Program_Type
00072 <a class="code" href="Error_8lex.html#a6">SCAN_PROGRAM</a>    program|Program|PROGRAM
00073 
00074 NEVER   [^a-zA-Z0-9_/.+\-{}:;,]
00075 
00076 %%
00077 
00078 
00079 {<a class="code" href="Error_8lex.html#a2">SCAN_ERROR</a>}    store_string(); <span class="keywordflow">return</span> <a class="code" href="Error_8lex.html#a2">SCAN_ERROR</a>;
00080 
00081 {<a class="code" href="Error_8lex.html#a3">SCAN_CODE</a>}             store_string(); <span class="keywordflow">return</span> <a class="code" href="Error_8lex.html#a3">SCAN_CODE</a>;
00082 {<a class="code" href="Error_8lex.html#a4">SCAN_MSG</a>}              store_string(); <span class="keywordflow">return</span> <a class="code" href="Error_8lex.html#a4">SCAN_MSG</a>;
00083 {<a class="code" href="Error_8lex.html#a5">SCAN_PTYPE</a>}            store_string(); <span class="keywordflow">return</span> <a class="code" href="Error_8lex.html#a5">SCAN_PTYPE</a>;
00084 {<a class="code" href="Error_8lex.html#a6">SCAN_PROGRAM</a>}          store_string(); <span class="keywordflow">return</span> <a class="code" href="Error_8lex.html#a6">SCAN_PROGRAM</a>;
00085 
00086 {<a class="code" href="Error_8lex.html#a7">SCAN_INT</a>}              store_integer(); <span class="keywordflow">return</span> <a class="code" href="Error_8lex.html#a7">SCAN_INT</a>;
00087 
00088 <span class="stringliteral">"{"</span>                     <span class="keywordflow">return</span> (int)*yytext;
00089 <span class="stringliteral">"}"</span>                     <span class="keywordflow">return</span> (int)*yytext;
00090 <span class="stringliteral">";"</span>                     <span class="keywordflow">return</span> (int)*yytext;
00091 <span class="stringliteral">"="</span>         <span class="keywordflow">return</span> (int)*yytext;
00092 
00093 [ \t]+
00094 \n                  ++error_line_num;
00095 &lt;INITIAL&gt;&lt;&lt;EOF&gt;&gt;        <a class="code" href="das_8lex.html#a14">yy_init</a> = 1; error_line_num = 1; <a class="code" href="das_8lex.html#a17">yyterminate</a>();
00096 
00097 <span class="stringliteral">"#"</span>                 <a class="code" href="das_8lex.html#a19">BEGIN</a>(comment);
00098 &lt;comment&gt;[^\n]*
00099 &lt;comment&gt;\n     ++error_line_num; <a class="code" href="das_8lex.html#a19">BEGIN</a>(INITIAL);
00100 &lt;comment&gt;&lt;&lt;EOF&gt;&gt;        <a class="code" href="das_8lex.html#a14">yy_init</a> = 1; error_line_num = 1; <a class="code" href="das_8lex.html#a17">yyterminate</a>();
00101 
00102 \<span class="stringliteral">"          BEGIN(quote); start_line = error_line_num; yymore();</span>
00103 <span class="stringliteral">&lt;quote&gt;[^"</span>\n\\]*    <a class="code" href="das_8lex.html#a20">yymore</a>();
00104 &lt;quote&gt;[^<span class="stringliteral">"\n\\]*\n  yymore(); ++error_line_num;</span>
00105 <span class="stringliteral">&lt;quote&gt;\\.      yymore();</span>
00106 <span class="stringliteral">&lt;quote&gt;\"       { </span>
00107 <span class="stringliteral">                  BEGIN(INITIAL); </span>
00108 <span class="stringliteral">              store_string();</span>
00109 <span class="stringliteral">              return SCAN_STR;</span>
00110 <span class="stringliteral">                        }</span>
00111 <span class="stringliteral">&lt;quote&gt;&lt;&lt;EOF&gt;&gt;      {</span>
00112 <span class="stringliteral">                          char msg[256];</span>
00113 <span class="stringliteral">              sprintf(msg,</span>
00114 <span class="stringliteral">                  "</span>Unterminated quote (starts on line %d)\n<span class="stringliteral">",</span>
00115 <span class="stringliteral">                  start_line);</span>
00116 <span class="stringliteral">              YY_FATAL_ERROR(msg);</span>
00117 <span class="stringliteral">                        }</span>
00118 <span class="stringliteral"></span>
00119 <span class="stringliteral">{NEVER}                 {</span>
00120 <span class="stringliteral">                          if (yytext) { /* suppress msgs about `' chars */</span>
00121 <span class="stringliteral">                            fprintf(stderr, "</span>Character `%c' is not<span class="stringliteral">", *yytext);</span>
00122 <span class="stringliteral">                            fprintf(stderr, "</span> allowed (except within<span class="stringliteral">");</span>
00123 <span class="stringliteral">                fprintf(stderr, "</span> quotes) and has been ignored\n<span class="stringliteral">");</span>
00124 <span class="stringliteral">              }</span>
00125 <span class="stringliteral">            }</span>
00126 <span class="stringliteral">%%</span>
00127 <span class="stringliteral"></span>
00128 <span class="stringliteral">void</span>
00129 <span class="stringliteral">store_integer()</span>
00130 <span class="stringliteral">{</span>
00131 <span class="stringliteral">    Errorlval.integer = atoi(yytext);</span>
00132 <span class="stringliteral">}</span>
00133 <span class="stringliteral"></span>
00134 <span class="stringliteral">void</span>
00135 <span class="stringliteral">store_string()</span>
00136 <span class="stringliteral">{</span>
00137 <span class="stringliteral">    Errorlval.string = yytext;</span>
00138 <span class="stringliteral">}</span>
00139 <span class="stringliteral"></span>
00140 <span class="stringliteral">/* </span>
00141 <span class="stringliteral"> * $Log: Error_8lex-source.html,v $
00141 <span class="stringliteral"> * Revision 1.2  2004/01/30 22:51:12  jimg
00141 <span class="stringliteral"> * Updated 2004/01/30.
00141 <span class="stringliteral"> *</span>
00142 <span class="stringliteral"> * Revision 1.11  2003/04/22 19:40:27  jimg</span>
00143 <span class="stringliteral"> * Merged with 3.3.1.</span>
00144 <span class="stringliteral"> *</span>
00145 <span class="stringliteral"> * Revision 1.10  2003/02/21 00:14:24  jimg</span>
00146 <span class="stringliteral"> * Repaired copyright.</span>
00147 <span class="stringliteral"> *</span>
00148 <span class="stringliteral"> * Revision 1.9.2.1  2003/02/21 00:10:07  jimg</span>
00149 <span class="stringliteral"> * Repaired copyright.</span>
00150 <span class="stringliteral"> *</span>
00151 <span class="stringliteral"> * Revision 1.9  2003/01/23 00:22:24  jimg</span>
00152 <span class="stringliteral"> * Updated the copyright notice; this implementation of the DAP is</span>
00153 <span class="stringliteral"> * copyrighted by OPeNDAP, Inc.</span>
00154 <span class="stringliteral"> *</span>
00155 <span class="stringliteral"> * Revision 1.8  2001/08/24 17:46:22  jimg</span>
00156 <span class="stringliteral"> * Resolved conflicts from the merge of release 3.2.6</span>
00157 <span class="stringliteral"> *</span>
00158 <span class="stringliteral"> * Revision 1.7.4.1  2001/08/16 17:26:19  edavis</span>
00159 <span class="stringliteral"> * Use "</span>%option noyywrap<span class="stringliteral">" instead of defining yywrap() to return 1.</span>
00160 <span class="stringliteral"> *</span>
00161 <span class="stringliteral"> * Revision 1.7  2000/09/22 02:17:20  jimg</span>
00162 <span class="stringliteral"> * Rearranged source files so that the CVS logs appear at the end rather than</span>
00163 <span class="stringliteral"> * the start. Also made the ifdef guard symbols use the same naming scheme and</span>
00164 <span class="stringliteral"> * wrapped headers included in other headers in those guard symbols (to cut</span>
00165 <span class="stringliteral"> * down on extraneous file processing - See Lakos).</span>
00166 <span class="stringliteral"> *</span>
00167 <span class="stringliteral"> * Revision 1.6  2000/06/07 18:06:58  jimg</span>
00168 <span class="stringliteral"> * Merged the pc port branch</span>
00169 <span class="stringliteral"> *</span>
00170 <span class="stringliteral"> * Revision 1.5.20.1  2000/06/02 18:21:27  rmorris</span>
00171 <span class="stringliteral"> * Mod's for port to Win32.</span>
00172 <span class="stringliteral"> *</span>
00173 <span class="stringliteral"> * Revision 1.5  1999/04/29 02:29:29  jimg</span>
00174 <span class="stringliteral"> * Merge of no-gnu branch</span>
00175 <span class="stringliteral"> *</span>
00176 <span class="stringliteral"> * Revision 1.4.2.1  1999/02/05 09:32:34  jimg</span>
00177 <span class="stringliteral"> * Fixed __unused__ so that it not longer clashes with Red Hat 5.2 inlined math code</span>
00178 <span class="stringliteral"> *</span>
00179 <span class="stringliteral"> * Revision 1.4  1998/08/06 16:14:47  jimg</span>
00180 <span class="stringliteral"> * Fixed the cvs log. It cannot have the $ Log $ and the comment thing on the</span>
00181 <span class="stringliteral"> * same line...</span>
00182 <span class="stringliteral"> *</span>
00183 <span class="stringliteral"> * Revision 1.3  1996/10/28 23:46:55  jimg</span>
00184 <span class="stringliteral"> * Added define of YY_NO_UNPUT to suppress creation of that function.</span>
00185 <span class="stringliteral"> *</span>
00186 <span class="stringliteral"> * Revision 1.2  1996/08/13 18:18:17  jimg</span>
00187 <span class="stringliteral"> * Added not_used to rcsid definition.</span>
00188 <span class="stringliteral"> * Added include of assert.h.</span>
00189 <span class="stringliteral"> *</span>
00190 <span class="stringliteral"> * Revision 1.1  1996/05/31 23:18:16  jimg</span>
00191 <span class="stringliteral"> * Added.</span>
00192 <span class="stringliteral"> */</span>
</pre></div><hr><address style="align: right;"><small>Generated on Tue Aug 19 12:42:02 2003 for OPeNDAP by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.18 </small></address>
</body>
</html>

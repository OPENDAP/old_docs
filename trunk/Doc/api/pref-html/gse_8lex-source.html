<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>gse.lex Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>gse.lex</h1><a href="gse_8lex.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 <span class="comment">/*</span>
00003 <span class="comment"> -*- mode: c++; c-basic-offset:4 -*-</span>
00004 <span class="comment"></span>
00005 <span class="comment"> This file is part of libdap, A C++ implementation of the OPeNDAP Data</span>
00006 <span class="comment"> Access Protocol.</span>
00007 <span class="comment"></span>
00008 <span class="comment"> Copyright (c) 2002,2003 OPeNDAP, Inc.</span>
00009 <span class="comment"> Author: James Gallagher &lt;jgallagher@opendap.org&gt;</span>
00010 <span class="comment"></span>
00011 <span class="comment"> This library is free software; you can redistribute it and/or</span>
00012 <span class="comment"> modify it under the terms of the GNU Lesser General Public</span>
00013 <span class="comment"> License as published by the Free Software Foundation; either</span>
00014 <span class="comment"> version 2.1 of the License, or (at your option) any later version.</span>
00015 <span class="comment"> </span>
00016 <span class="comment"> This library is distributed in the hope that it will be useful,</span>
00017 <span class="comment"> but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00018 <span class="comment"> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
00019 <span class="comment"> Lesser General Public License for more details.</span>
00020 <span class="comment"> </span>
00021 <span class="comment"> You should have received a copy of the GNU Lesser General Public</span>
00022 <span class="comment"> License along with this library; if not, write to the Free Software</span>
00023 <span class="comment"> Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00024 <span class="comment"></span>
00025 <span class="comment"> You can contact OPeNDAP, Inc. at PO Box 112, Saunderstown, RI. 02874-0112.</span>
00026 <span class="comment"></span>
00027 <span class="comment"> (c) COPYRIGHT URI/MIT 1999</span>
00028 <span class="comment">*/</span> 
00029 
00030 <span class="comment">/*</span>
00031 <span class="comment">  Scanner for grid selection sub-expressions. The scanner is not reentrant,</span>
00032 <span class="comment">  but can share a name space with other scanners.</span>
00033 <span class="comment"></span>
00034 <span class="comment">   Note:</span>
00035 <span class="comment">   1) The `defines' file gse.tab.h is built using `bison -d'.</span>
00036 <span class="comment">   2) Define YY_DECL such that the scanner is called `gse_lex'.</span>
00037 <span class="comment">   3) When bison builds the gse.tab.h file, it uses `gse_' instead</span>
00038 <span class="comment">   of `yy' for variable name prefixes (e.g., yylval --&gt; gse_lval).</span>
00039 <span class="comment"></span>
00040 <span class="comment">   1/13/99 jhrg</span>
00041 <span class="comment">*/</span>
00042 
00043 %{
00044 
00045 <span class="preprocessor">#include "<a class="code" href="config__dap_8h.html">config_dap.h</a>"</span>
00046 
00047 <span class="keyword">static</span> <span class="keywordtype">char</span> rcsid[] not_used = {<span class="stringliteral">"$Id$"</span>};
00048 
00049 <span class="preprocessor">#define YY_DECL int gse_lex YY_PROTO(( void ))</span>
00050 <span class="preprocessor"></span><span class="preprocessor">#define ID_MAX 256</span>
00051 <span class="preprocessor"></span><span class="preprocessor">#define YY_NO_UNPUT 1</span>
00052 <span class="preprocessor"></span><span class="preprocessor">#define YY_NO_INPUT 1</span>
00053 <span class="preprocessor"></span>
00054 <span class="preprocessor">#include &lt;string.h&gt;</span>
00055 
00056 <span class="preprocessor">#include "<a class="code" href="gse_8tab_8h.html">gse.tab.h</a>"</span>
00057 
00058 <span class="keyword">static</span> <span class="keywordtype">void</span> store_int32();
00059 <span class="keyword">static</span> <span class="keywordtype">void</span> store_float64();
00060 <span class="keyword">static</span> <span class="keywordtype">void</span> store_id();
00061 <span class="keyword">static</span> <span class="keywordtype">void</span> store_op(<span class="keywordtype">int</span> op);
00062 
00063 %}
00064 
00065 %option noyywrap
00066 
00067 NAN     [Nn][Aa][Nn]
00068 INF     [Ii][Nn][Ff]
00069 
00070 <a class="code" href="gse_8lex.html#a4">SCAN_INT</a>    [-+]?[0-9]+
00071 
00072 SCAN_MANTISA    ([0-9]+\.?[0-9]*)|([0-9]*\.?[0-9]+)
00073 SCAN_EXPONENT   (E|e)[-+]?[0-9]+
00074 
00075 <a class="code" href="gse_8tab_8h.html#a1">SCAN_FLOAT</a>  ([-+]?{SCAN_MANTISA}{SCAN_EXPONENT}?)|({NAN})|({INF})
00076 
00077 <span class="comment">/* See das.lex for comments about the characters allowed in a WORD.</span>
00078 <span class="comment">   10/31/2001 jhrg */</span>
00079 
00080 <a class="code" href="gse_8lex.html#a6">SCAN_WORD</a>   [-+a-zA-Z0-9_/%.\\][-+a-zA-Z0-9_/%.\\#]*
00081 
00082 <a class="code" href="gse_8lex.html#a7">SCAN_EQUAL</a>  =
00083 <a class="code" href="gse_8lex.html#a8">SCAN_NOT_EQUAL</a>  !=
00084 <a class="code" href="gse_8lex.html#a9">SCAN_GREATER</a>    &gt;
00085 <a class="code" href="gse_8lex.html#a10">SCAN_GREATER_EQL</a> &gt;=
00086 <a class="code" href="gse_8lex.html#a11">SCAN_LESS</a>   &lt;
00087 <a class="code" href="gse_8lex.html#a12">SCAN_LESS_EQL</a>   &lt;=
00088 
00089 NEVER       [^a-zA-Z0-9_/%.#:+\-,]
00090 
00091 %%
00092 
00093 {<a class="code" href="gse_8lex.html#a4">SCAN_INT</a>}  store_int32(); <span class="keywordflow">return</span> <a class="code" href="gse_8lex.html#a4">SCAN_INT</a>;
00094 {<a class="code" href="gse_8lex.html#a5">SCAN_FLOAT</a>}    store_float64(); <span class="keywordflow">return</span> <a class="code" href="gse_8lex.html#a5">SCAN_FLOAT</a>;
00095 
00096 {<a class="code" href="gse_8lex.html#a6">SCAN_WORD</a>} store_id(); <span class="keywordflow">return</span> <a class="code" href="gse_8lex.html#a6">SCAN_WORD</a>;
00097 
00098 {<a class="code" href="gse_8lex.html#a7">SCAN_EQUAL</a>}    store_op(<a class="code" href="gse_8lex.html#a7">SCAN_EQUAL</a>); <span class="keywordflow">return</span> <a class="code" href="gse_8lex.html#a7">SCAN_EQUAL</a>;
00099 {<a class="code" href="gse_8lex.html#a8">SCAN_NOT_EQUAL</a>} store_op(<a class="code" href="gse_8lex.html#a8">SCAN_NOT_EQUAL</a>); <span class="keywordflow">return</span> <a class="code" href="gse_8lex.html#a8">SCAN_NOT_EQUAL</a>;
00100 {<a class="code" href="gse_8lex.html#a9">SCAN_GREATER</a>}  store_op(<a class="code" href="gse_8lex.html#a9">SCAN_GREATER</a>); <span class="keywordflow">return</span> <a class="code" href="gse_8lex.html#a9">SCAN_GREATER</a>;
00101 {<a class="code" href="gse_8lex.html#a10">SCAN_GREATER_EQL</a>} store_op(<a class="code" href="gse_8lex.html#a10">SCAN_GREATER_EQL</a>); <span class="keywordflow">return</span> <a class="code" href="gse_8lex.html#a10">SCAN_GREATER_EQL</a>;
00102 {<a class="code" href="gse_8lex.html#a11">SCAN_LESS</a>} store_op(<a class="code" href="gse_8lex.html#a11">SCAN_LESS</a>); <span class="keywordflow">return</span> <a class="code" href="gse_8lex.html#a11">SCAN_LESS</a>;
00103 {<a class="code" href="gse_8lex.html#a12">SCAN_LESS_EQL</a>} store_op(<a class="code" href="gse_8lex.html#a12">SCAN_LESS_EQL</a>); <span class="keywordflow">return</span> <a class="code" href="gse_8lex.html#a12">SCAN_LESS_EQL</a>;
00104 
00105 %%
00106 
00107 <span class="comment">// Three glue routines for string scanning. These are not declared in the</span>
00108 <span class="comment">// header gse.tab.h nor is YY_BUFFER_STATE. Including these here allows them</span>
00109 <span class="comment">// to see the type definitions in lex.gse.c (where YY_BUFFER_STATE is</span>
00110 <span class="comment">// defined) and allows callers to declare them (since callers outside of this</span>
00111 <span class="comment">// file cannot declare YY_BUFFER_STATE variable).</span>
00112 
00113 <span class="keywordtype">void</span> *
00114 <a class="code" href="gse_8lex.html#a13">gse_string</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str)
00115 {
00116     <span class="keywordflow">return</span> (<span class="keywordtype">void</span> *)gse__scan_string(str);
00117 }
00118 
00119 <span class="keywordtype">void</span>
00120 <a class="code" href="gse_8lex.html#a14">gse_switch_to_buffer</a>(<span class="keywordtype">void</span> *buf)
00121 {
00122     gse__switch_to_buffer((YY_BUFFER_STATE)buf);
00123 }
00124 
00125 <span class="keywordtype">void</span>
00126 <a class="code" href="gse_8lex.html#a15">gse_delete_buffer</a>(<span class="keywordtype">void</span> *buf)
00127 {
00128     gse__delete_buffer((YY_BUFFER_STATE)buf);
00129 }
00130 
00131 <span class="comment">// Note that the grid() CE funxtion only deals with numeric maps (8/28/2001</span>
00132 <span class="comment">// jhrg) and that all comparisons are done using doubles. </span>
00133 
00134 <span class="keyword">static</span> <span class="keywordtype">void</span>
00135 store_int32()
00136 {
00137     <a class="code" href="gse_8tab_8h.html#a20">gse_lval</a>.<a class="code" href="unionYYSTYPE.html#YYSTYPEm6">val</a> = atof(yytext);
00138 }
00139 
00140 <span class="keyword">static</span> <span class="keywordtype">void</span>
00141 store_float64()
00142 {
00143     <a class="code" href="gse_8tab_8h.html#a20">gse_lval</a>.<a class="code" href="unionYYSTYPE.html#YYSTYPEm6">val</a> = atof(yytext);
00144 }
00145 
00146 <span class="keyword">static</span> <span class="keywordtype">void</span>
00147 store_id()
00148 {
00149     strncpy(<a class="code" href="gse_8tab_8h.html#a20">gse_lval</a>.<a class="code" href="unionYYSTYPE.html#YYSTYPEm5">id</a>, yytext, ID_MAX-1);
00150     <a class="code" href="gse_8tab_8h.html#a20">gse_lval</a>.<a class="code" href="unionYYSTYPE.html#YYSTYPEm5">id</a>[ID_MAX-1] = <span class="charliteral">'\0'</span>;
00151 }
00152 
00153 <span class="keyword">static</span> <span class="keywordtype">void</span>
00154 store_op(<span class="keywordtype">int</span> op)
00155 {
00156     <a class="code" href="gse_8tab_8h.html#a20">gse_lval</a>.<a class="code" href="unionYYSTYPE.html#YYSTYPEm4">op</a> = op;
00157 }
00158 
00159 <span class="comment">/*</span>
00160 <span class="comment"> * $Log: gse_8lex-source.html,v $
00160 <span class="comment"> * Revision 1.2  2004/01/30 22:51:15  jimg
00160 <span class="comment"> * Updated 2004/01/30.
00160 <span class="comment"> *</span>
00161 <span class="comment"> * Revision 1.10  2003/04/22 19:40:28  jimg</span>
00162 <span class="comment"> * Merged with 3.3.1.</span>
00163 <span class="comment"> *</span>
00164 <span class="comment"> * Revision 1.9  2003/02/21 00:14:25  jimg</span>
00165 <span class="comment"> * Repaired copyright.</span>
00166 <span class="comment"> *</span>
00167 <span class="comment"> * Revision 1.8.2.1  2003/02/21 00:10:08  jimg</span>
00168 <span class="comment"> * Repaired copyright.</span>
00169 <span class="comment"> *</span>
00170 <span class="comment"> * Revision 1.8  2003/01/23 00:22:25  jimg</span>
00171 <span class="comment"> * Updated the copyright notice; this implementation of the DAP is</span>
00172 <span class="comment"> * copyrighted by OPeNDAP, Inc.</span>
00173 <span class="comment"> *</span>
00174 <span class="comment"> * Revision 1.7  2002/06/03 22:21:16  jimg</span>
00175 <span class="comment"> * Merged with release-3-2-9</span>
00176 <span class="comment"> *</span>
00177 <span class="comment"> * Revision 1.4.4.4  2001/11/01 00:43:51  jimg</span>
00178 <span class="comment"> * Fixes to the scanners and parsers so that dataset variable names may</span>
00179 <span class="comment"> * start with digits. I've expanded the set of characters that may appear</span>
00180 <span class="comment"> * in a variable name and made it so that all except `#' may appear at</span>
00181 <span class="comment"> * the start. Some characters are not allowed in variables that appear in</span>
00182 <span class="comment"> * a DDS or CE while they are allowed in the DAS. This makes it possible</span>
00183 <span class="comment"> * to define containers with names like `COARDS:long_name.' Putting a colon</span>
00184 <span class="comment"> * in a variable name makes the CE parser much more complex. Since the set</span>
00185 <span class="comment"> * of characters that people want seems pretty limited (compared to the</span>
00186 <span class="comment"> * complete ASCII set) I think this is an OK approach. If we have to open</span>
00187 <span class="comment"> * up the expr.lex scanner completely, then we can but not without adding</span>
00188 <span class="comment"> * lots of action clauses to teh parser. Note that colon is just an example,</span>
00189 <span class="comment"> * there's a host of characters that are used in CEs that are not allowed</span>
00190 <span class="comment"> * in IDs.</span>
00191 <span class="comment"> *</span>
00192 <span class="comment"> * Revision 1.6  2001/09/28 17:50:07  jimg</span>
00193 <span class="comment"> * Merged with 3.2.7.</span>
00194 <span class="comment"> *</span>
00195 <span class="comment"> * Revision 1.4.4.3  2001/09/25 20:21:05  jimg</span>
00196 <span class="comment"> * Fixed EQUAL token. Added NOT EQUAL.</span>
00197 <span class="comment"> *</span>
00198 <span class="comment"> * Revision 1.5  2001/08/24 17:46:22  jimg</span>
00199 <span class="comment"> * Resolved conflicts from the merge of release 3.2.6</span>
00200 <span class="comment"> *</span>
00201 <span class="comment"> * Revision 1.4.4.2  2001/08/16 17:26:20  edavis</span>
00202 <span class="comment"> * Use "%option noyywrap" instead of defining yywrap() to return 1.</span>
00203 <span class="comment"> *</span>
00204 <span class="comment"> * Revision 1.4.4.1  2001/06/23 00:52:08  jimg</span>
00205 <span class="comment"> * Normalized the definitions of ID (SCAN_ID), INT, FLOAT and NEVER so</span>
00206 <span class="comment"> * that they are (more or less) the same in all the scanners. There are</span>
00207 <span class="comment"> * one or two characters that differ (for example das.lex allows ( and )</span>
00208 <span class="comment"> * in an ID while dds.lex, expr.lex and gse.lex don't) but the definitions</span>
00209 <span class="comment"> * are essentially the same across the board.</span>
00210 <span class="comment"> * Added `#' to the set of characeters allowed in an ID (bug 179).</span>
00211 <span class="comment"> *</span>
00212 <span class="comment"> * Revision 1.4  2000/09/22 02:17:23  jimg</span>
00213 <span class="comment"> * Rearranged source files so that the CVS logs appear at the end rather than</span>
00214 <span class="comment"> * the start. Also made the ifdef guard symbols use the same naming scheme and</span>
00215 <span class="comment"> * wrapped headers included in other headers in those guard symbols (to cut</span>
00216 <span class="comment"> * down on extraneous file processing - See Lakos).</span>
00217 <span class="comment"> *</span>
00218 <span class="comment"> * Revision 1.3  2000/06/07 18:07:01  jimg</span>
00219 <span class="comment"> * Merged the pc port branch</span>
00220 <span class="comment"> *</span>
00221 <span class="comment"> * Revision 1.2.20.1  2000/06/02 18:39:03  rmorris</span>
00222 <span class="comment"> * Mod's for port to win32.</span>
00223 <span class="comment"> *</span>
00224 <span class="comment"> * Revision 1.2  1999/04/29 02:29:37  jimg</span>
00225 <span class="comment"> * Merge of no-gnu branch</span>
00226 <span class="comment"> *</span>
00227 <span class="comment"> * Revision 1.1  1999/01/21 02:07:44  jimg</span>
00228 <span class="comment"> * Created</span>
00229 <span class="comment"> *</span>
00230 <span class="comment"> */</span>
00231 
</pre></div><hr><address style="align: right;"><small>Generated on Tue Aug 19 12:42:02 2003 for OPeNDAP by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.18 </small></address>
</body>
</html>
